<!DOCTYPE html>
<html lang="es">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carlos ‚Ä¢ Asesor√≠a Financiera</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Librer√≠as externas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>

  <!-- HEADER Y MEN√ö DE NAVEGACI√ìN -->
  <header role="banner" class="header-elevado">
    <div class="container header-content">
      <div class="logo-area">
        <h1 class="logo">Carlos<span> ‚Ä¢ Asesor√≠a Financiera</span></h1>
      </div>
      <button class="nav-toggle" aria-label="Abrir men√∫ m√≥vil">‚ò∞</button>
      <nav role="navigation" aria-label="Men√∫ principal">
        <ul>
          <li><a href="#inicio">Inicio</a></li>
          <li><a href="#quien-soy">Qui√©n Soy</a></li>
          <li><a href="#casos-exito">Casos de √âxito</a></li>
          <li><a href="#asesorias">Asesor√≠as</a></li>
          <li><a href="#modelos">Modelos</a></li>
          <li><a href="#test-perfil">Test Perfil</a></li>
          <li><a href="#simulador">Simulador</a></li>
          <li><a href="#proteccion">Protecci√≥n</a></li>
          <li><a href="#newsletter">Newsletter</a></li>
          <li><a href="#contacto">Contacto</a></li>
        </ul>
      </nav>
    </div>
  </header>
  

  <!-- CONTENIDO PRINCIPAL -->
  <main>

    <!-- HERO SECTION -->
    <section id="inicio" class="hero">
      <div class="container hero-content">
        <h2>Bienvenido a tu libertad financiera</h2>
        <p>Asesor√≠a personalizada en ETFs, acciones y real estate para que tomes el control de tu dinero.</p>
        <a href="#newsletter" class="btn-primary">Suscr√≠bete al Newsletter</a>
      </div>
    </section>

    <!-- QUI√âN SOY -->
    <section id="quien-soy" class="section section-quien-soy">
      <div class="container qs-grid">
        <div class="qs-text">
          <h2>¬øQui√©n Soy?</h2>
          <p>Hola, soy <strong>Carlos</strong>, gestor patrimonial con m√°s de 10 a√±os de experiencia en inversi√≥n en ETFs, acciones y real estate. Mi misi√≥n es ense√±arte a gestionar tu dinero de forma inteligente y adaptada a tu perfil.</p>
          <p>Creo firmemente en la educaci√≥n financiera como herramienta de libertad, por eso acompa√±o a mis clientes en cada paso de su viaje inversor.</p>
          <a href="#asesorias" class="btn-primary">Conoce mis asesor√≠as</a>
        </div>
        <div class="qs-img">
          <img src="https://via.placeholder.com/400x400?text=Carlos" alt="Carlos, asesor financiero" />
        </div>
      </div>
    </section>

    <!-- CASOS DE √âXITO -->
    <section id="casos-exito" class="section section-casos-exito">
      <div class="container">
        <h2>Casos de √âxito</h2>
        <div class="casos-grid">
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=LG" alt="Laura G." />
            <h4>Laura G.</h4>
            <p>‚ÄúGracias a la asesor√≠a, logr√© ahorrar 200‚Ç¨ al mes y empec√© a invertir en ETFs. Ahora tengo m√°s tranquilidad y objetivos reales.‚Äù</p>
          </div>
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=PM" alt="Pedro M." />
            <h4>Pedro M.</h4>
            <p>‚ÄúPas√© de no entender nada de inversiones a gestionar mi capital con confianza. Carlos me dio las herramientas justas y claras.‚Äù</p>
          </div>
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=AJ" alt="Ana y Jorge" />
            <h4>Ana y Jorge</h4>
            <p>‚ÄúComo familia con ingresos bajos, no pens√°bamos que pod√≠amos invertir. Ahora tenemos un fondo com√∫n que crece cada mes.‚Äù</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ASESOR√çAS -->
    <section id="asesorias" class="section section-asesorias">
      <div class="container asesorias-grid">
        <div class="asesorias-text">
          <h2>Asesor√≠as & Gesti√≥n de Inversiones</h2>
          <p>Ofrezco asesor√≠a estrat√©gica a inversores particulares, con o sin experiencia. Te acompa√±o en cada paso para dise√±ar una cartera adaptada a tus objetivos y tu nivel de riesgo.</p>
          <h3>üí° Suscripci√≥n mensual especial</h3>
          <p>Servicio dedicado a quienes ingresan menos de 1500 ‚Ç¨/mes o no tienen formaci√≥n financiera. Accede a asesoramiento real por una cuota asequible.</p>
          <div class="suscripcion-box">
            <p><strong>¬øIngresas menos de 1500 ‚Ç¨/mes?</strong> √önete a mi asesor√≠a accesible por solo <span class="highlight">9 ‚Ç¨/mes</span>.</p>
            <a href="#contacto" class="btn-primary">M√°s informaci√≥n</a>
          </div>
        </div>
        <div class="asesorias-img">
          <img src="https://via.placeholder.com/400x300?text=Asesor√≠as" alt="Asesor√≠as financieras" />
        </div>
      </div>
    </section>

    <!-- MODELOS DE INVERSI√ìN -->
    <section id="modelos" class="section section-modelos">
      <div class="container">
        <h2>Modelos de Inversi√≥n</h2>
        <div class="modelos-cards">
          <div class="modelo-card">
            <img src="https://via.placeholder.com/80?text=ETFs" alt="Gesti√≥n de ETFs" />
            <h4>Gesti√≥n de ETFs</h4>
            <p>Diversifica tu cartera con fondos cotizados de bajo coste y exp√≥nte a mercados globales.</p>
          </div>
          <div class="modelo-card">
            <img src="https://via.placeholder.com/80?text=Acciones" alt="Inversi√≥n en Acciones" />
            <h4>Inversi√≥n en Acciones</h4>
            <p>Selecciona empresas de calidad para beneficiarte de su crecimiento a largo plazo.</p>
          </div>
          <div class="modelo-card">
            <img src="https://via.placeholder.com/80?text=Real+Estate" alt="Real Estate" />
            <h4>Real Estate</h4>
            <p>Accede al sector inmobiliario a trav√©s de REITs y plataformas de crowdlending.</p>
          </div>
          <div class="modelo-card">
            <img src="https://via.placeholder.com/80?text=Ahorro" alt="Planes de Ahorro" />
            <h4>Planes de Ahorro</h4>
            <p>Construye tu colch√≥n financiero con planes de jubilaci√≥n y productos de ahorro programado.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TEST DE INVERSION -->
    <section id="test-perfil" class="section section-test">
  <div class="container test-wrapper">
    <h2>Test de Perfil Inversor</h2>
    <div id="step-counter" class="step-counter">1 de 10</div>
    <form id="test-form">
      <!-- Contenido centrado -->
      <div class="centered-content">
        <!-- Pregunta 1 -->
        <div class="step active">
          <p>1. ¬øCu√°l es tu objetivo principal?</p>
          <label><input type="radio" name="q1" value="1" required> Seguridad</label>
          <label><input type="radio" name="q1" value="3"> Ingresos</label>
          <label><input type="radio" name="q1" value="5"> Crecimiento</label>
        </div>
        <!-- Pregunta 2 -->
        <div class="step">
          <p>2. ¬øHorizonte de inversi√≥n?</p>
          <label><input type="radio" name="q2" value="1" required> < 1 a√±o</label>
          <label><input type="radio" name="q2" value="3"> 1‚Äì5 a√±os</label>
          <label><input type="radio" name="q2" value="5"> > 5 a√±os</label>
        </div>
        <!-- Pregunta 3 -->
        <div class="step">
          <p>3. Reacci√≥n ante -10% de ca√≠da:</p>
          <label><input type="radio" name="q3" value="1" required> Vendo todo</label>
          <label><input type="radio" name="q3" value="3"> Espero</label>
          <label><input type="radio" name="q3" value="5"> Compro m√°s</label>
        </div>
        <!-- Pregunta 4 -->
        <div class="step">
          <p>4. % de patrimonio a invertir:</p>
          <label><input type="radio" name="q4" value="1" required> < 20%</label>
          <label><input type="radio" name="q4" value="3"> 20‚Äì50%</label>
          <label><input type="radio" name="q4" value="5"> > 50%</label>
        </div>
        <!-- Pregunta 5 -->
        <div class="step">
          <p>5. Nivel de conocimientos:</p>
          <label><input type="radio" name="q5" value="1" required> B√°sicos</label>
          <label><input type="radio" name="q5" value="3"> Intermedios</label>
          <label><input type="radio" name="q5" value="5"> Avanzados</label>
        </div>
        <!-- Pregunta 6 -->
        <div class="step">
          <p>6. ¬øNecesitas liquidez frecuente?</p>
          <label><input type="radio" name="q6" value="1" required> S√≠</label>
          <label><input type="radio" name="q6" value="3"> A veces</label>
          <label><input type="radio" name="q6" value="5"> No</label>
        </div>
        <!-- Pregunta 7 -->
        <div class="step">
          <p>7. ¬øCon qu√© frecuencia revisar√°s tus inversiones?</p>
          <label><input type="radio" name="q7" value="1" required> Diario</label>
          <label><input type="radio" name="q7" value="3"> Mensual</label>
          <label><input type="radio" name="q7" value="5"> Anual</label>
        </div>
        <!-- Pregunta 8 -->
        <div class="step">
          <p>8. ¬øComprendes bien el inter√©s compuesto?</p>
          <label><input type="radio" name="q8" value="1" required> No</label>
          <label><input type="radio" name="q8" value="3"> Algo</label>
          <label><input type="radio" name="q8" value="5"> S√≠</label>
        </div>
        <!-- Pregunta 9 -->
        <div class="step">
          <p>9. ¬øHas invertido antes?</p>
          <label><input type="radio" name="q9" value="1" required> Nunca</label>
          <label><input type="radio" name="q9" value="3"> Pocas veces</label>
          <label><input type="radio" name="q9" value="5"> Con frecuencia</label>
        </div>
        <!-- Pregunta 10 -->
        <div class="step">
          <p>10. ¬øTe afectan las noticias de mercado?</p>
          <label><input type="radio" name="q10" value="1" required> Mucho</label>
          <label><input type="radio" name="q10" value="3"> Algo</label>
          <label><input type="radio" name="q10" value="5"> Casi nada</label>
        </div>
      </div>
      <!-- Botones -->
      <div class="buttons">
        <button type="button" id="prev-btn" class="btn-primary" disabled>Anterior</button>
        <button type="button" id="next-btn" class="btn-primary">Siguiente</button>
      </div>
    </form>
    <!-- Resultado -->
    <div id="test-result" class="test-result" style="display:none;">
      <h3>Tu perfil de riesgo es: <span id="perfil-texto"></span></h3>
      <p id="perfil-desc"></p>
      <p>Rendimiento anual estimado: <strong id="perfil-return"></strong></p>
    </div>
  </div>
    </section>

    <!-- CALCADORA DE INTER√âS COMPUESTO -->
    <section id="simulador" class="section-compound">
      <div class="simulador-wrapper">
        <h2>Calculadora de Inter√©s Compuesto</h2>
    
        <form id="calculatorForm">
          <div class="input-row">
            <div class="input-group">
              <label for="initialAmount">Capital Inicial</label>
              <input type="number" step="0.01" id="initialAmount" value="1000" required />
            </div>
            <div class="input-group">
              <label for="periodicDeposit">Aportaci√≥n Mensual</label>
              <input type="number" step="0.01" id="periodicDeposit" value="200" required />
            </div>
            <div class="input-group">
              <label for="interestRate">Tasa Anual (%)</label>
              <input type="number" step="0.01" id="interestRate" value="5" required />
            </div>
            <div class="input-group">
              <label for="years">Duraci√≥n (a√±os)</label>
              <input type="number" id="years" value="20" required />
            </div>
          </div>
    
          <div class="button-group">
            <button type="submit" class="btn-primary">Calcular</button>
            <button type="button" class="btn-secondary" onclick="exportPDF()">Exportar a PDF</button>
            <button type="button" class="btn-info" onclick="toggleDarkMode()">Modo Oscuro</button>
          </div>
        </form>
    
        <div id="results" class="result-box">
          <h3>Resultado Final</h3>
          <p><strong>Total Acumulado:</strong> <span id="totalSaved"></span></p>
          <p><strong>Total Aportado:</strong> <span id="totalDeposited"></span></p>
          <p><strong>Intereses Ganados:</strong> <span id="totalInterest"></span></p>
          <button type="button" id="cerrarCalculoBtn" class="btn-secondary">Cerrar c√°lculo</button>
        </div>
    
    <!-- RESULTADOS GR√ÅFICOS Y TABLAS -->
    <div id="resultadosGrid" class="resultados-grid">
      <!-- GR√ÅFICOS: arriba en horizontal -->
      <div class="graficos-box">
        <!-- PIE CHART -->
        <div class="grafico grafico-tarta">
          <canvas id="pieChart" width="400" height="400"></canvas>
          <div class="leyenda-pie" id="leyendaPieChart"></div>
        </div>
      

<!-- NUEVO GR√ÅFICO DE BARRAS ACUMULADAS -->
<div class="grafico grafico-barras">
  <canvas id="barChartAcumulado" width="700" height="400"></canvas>
</div>

      
      <!-- TABLAS: abajo en dos columnas -->
      <div class="tablas-box">
        <div class="tabla">
          <table class="table">
            <thead>
              <tr>
                <th>A√±o</th><th>Aportaci√≥n</th><th>Inter√©s</th><th>Balance</th>
              </tr>
            </thead>
            <tbody id="tableBodyLeft"></tbody>
          </table>
        </div>
        <div class="tabla">
          <table class="table">
            <thead>
              <tr>
                <th>A√±o</th><th>Aportaci√≥n</th><th>Inter√©s</th><th>Balance</th>
              </tr>
            </thead>
            <tbody id="tableBodyRight"></tbody>
          </table>
        </div>
      </div>
    </div>

    </section>
    


    <!-- PROTECCI√ìN PATRIMONIAL -->
    <section id="proteccion" class="section section-proteccion">
      <div class="container">
        <h2 class="text-center mb-4">üõ°Ô∏è Protecci√≥n Patrimonial</h2>
        <p class="lead text-center fs-5 mb-4" style="max-width: 700px; margin: 0 auto;">
          Descubre qu√© tipo de plan de protecci√≥n patrimonial es m√°s adecuado para ti.
        </p>
    
        <!-- Bot√≥n para mostrar test -->
        <div class="text-center mb-5">
          <button id="mostrar-test-btn" class="btn btn-primary btn-lg">
            ¬°S√≠! Quiero descubrir el tipo de plan que mejor me venga
          </button>
        </div>
    
        <!-- Test oculto -->
        <div class="test-wrapper mt-4 mb-5" style="display: none;">
          <div id="step-counter-patrimonio" class="step-counter">1 de 6</div>
          <form id="test-patrimonio">
            <div class="centered-content">
              <!-- Preguntas -->
              <div class="step active">
                <p>1. ¬øTienes un fondo de emergencia para al menos 3 meses?</p>
                <label><input type="radio" name="q1" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q1" value="no"> No</label>
              </div>
              <div class="step">
                <p>2. ¬øTienes seguro de vida o incapacidad?</p>
                <label><input type="radio" name="q2" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q2" value="no"> No</label>
              </div>
              <div class="step">
                <p>3. ¬øDiversificas tus inversiones?</p>
                <label><input type="radio" name="q3" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q3" value="no"> No</label>
              </div>
              <div class="step">
                <p>4. ¬øHas hecho testamento o planificaci√≥n hereditaria?</p>
                <label><input type="radio" name="q4" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q4" value="no"> No</label>
              </div>
              <div class="step">
                <p>5. ¬øConoces tus obligaciones fiscales como inversor?</p>
                <label><input type="radio" name="q5" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q5" value="no"> No</label>
              </div>
              <div class="step">
                <p>6. ¬øHas recibido asesoramiento legal o financiero en el √∫ltimo a√±o?</p>
                <label><input type="radio" name="q6" value="s√≠"> S√≠</label>
                <label><input type="radio" name="q6" value="no"> No</label>
              </div>
            </div>
            <div class="buttons">
              <button type="button" id="prev-btn-patrimonio" class="btn-primary" disabled>Anterior</button>
              <button type="button" id="next-btn-patrimonio" class="btn-primary">Siguiente</button>
            </div>
          </form>
          <div id="diagnostico-final" class="test-result d-none">
            <h3 class="mt-4">üõ°Ô∏è Diagn√≥stico de tu Protecci√≥n Patrimonial</h3>
            <p class="lead"><strong>Resultado:</strong> <span id="nivel-proteccion" class="highlight"></span></p>
            <p id="mensaje-proteccion" class="mb-4"></p>
          
            <form id="envio-email" class="email-form">
              <label for="emailUsuario">¬øQuieres recibir tu diagn√≥stico por email?</label>
              <input type="email" id="emailUsuario" name="emailUsuario" placeholder="tu@email.com" required>
              <button type="submit" class="btn-primary mt-2">Enviar</button>
            </form>
          
            <p id="confirmacion-envio" style="display:none;" class="mt-3 text-success">‚úÖ Tu diagn√≥stico ha sido enviado.</p>
          
            <a href="#contacto" class="btn btn-success" style="margin-top: 1rem;">Solicitar revisi√≥n personalizada</a>
          </div>                   
        </div>
    
        <!-- Conceptos Clave -->
        <div class="proteccion-intro mt-5 mb-5" style="max-width: 850px; margin: 0 auto; text-align: center;">
          <h3 class="mb-4">üîé Conceptos Clave</h3>
          <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem;">
            <div style="flex: 1 1 250px; min-width: 250px; max-width: 300px;">
              <p><strong>Plan de Jubilaci√≥n:</strong> Un buen plan asegura ingresos estables cuando dejes de trabajar. Usa fondos indexados y planes pensionales. üíº</p>
            </div>
            <div style="flex: 1 1 250px; min-width: 250px; max-width: 300px;">
              <p><strong>Diversificaci√≥n:</strong> Distribuye tus inversiones entre ETFs, acciones y real estate para minimizar riesgos. üåç</p>
            </div>
            <div style="flex: 1 1 250px; min-width: 250px; max-width: 300px;">
              <p><strong>Objetivos Financieros:</strong> Define metas claras a corto, medio y largo plazo para tener un rumbo seguro. üìä</p>
            </div>
          </div>
        </div>
    
        <!-- Pilares del Plan de Protecci√≥n Patrimonial -->
        <div class="mt-5 text-center">
          <h3 class="mb-4" style="margin-top: 5rem;">üß± Pilares del Plan de Protecci√≥n Patrimonial</h3>
          <div class="grid-points" style="max-width: 1100px; margin: 0 auto;">
            <div class="point-box">
              <h4>An√°lisis Patrimonial</h4>
              <p>Inventario detallado de tus activos, ingresos, deudas, situaci√≥n fiscal y legal. Es el punto de partida para cualquier estrategia.</p>
            </div>
            <div class="point-box">
              <h4>Coberturas Clave</h4>
              <p>Contrataci√≥n adecuada de seguros de vida, incapacidad, salud y responsabilidad civil para proteger tu n√∫cleo familiar y patrimonial.</p>
            </div>
            <div class="point-box">
              <h4>Diversificaci√≥n</h4>
              <p>Distribuir tus inversiones entre ETFs, inmuebles, liquidez, commodities y tecnolog√≠a para reducir el riesgo sin perder rentabilidad.</p>
            </div>
            <div class="point-box">
              <h4>Blindaje Legal</h4>
              <p>Uso estrat√©gico de testamentos, donaciones, sociedades o pactos familiares para asegurar la continuidad de tu legado.</p>
            </div>
            <div class="point-box">
              <h4>Planificaci√≥n Familiar</h4>
              <p>Organizar el traspaso patrimonial pensando en la estabilidad de tus herederos, integrando educaci√≥n financiera intergeneracional.</p>
            </div>
            <div class="point-box">
              <h4>Revisi√≥n Anual</h4>
              <p>Actualizaci√≥n peri√≥dica de tus estructuras de protecci√≥n seg√∫n la evoluci√≥n normativa, econ√≥mica y personal.</p>
            </div>
          </div>
        </div>
    
        <!-- Ejemplo de Estrategia -->
        <div class="mt-5 text-center">
          <h3 class="mb-3" style="margin-top: 5rem;">üìä Ejemplo de Distribuci√≥n Patrimonial</h3>
          <p class="text-muted">As√≠ podr√≠as distribuir tus ahorros:</p>
          <div class="table-responsive mt-3" style="max-width: 900px; margin-left: auto; margin-right: auto;">
            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Categor√≠a</th>
                  <th>% Recomendado</th>
                  <th>Descripci√≥n</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Activo Seguro (Bonos, CDTs)</td>
                  <td>30%</td>
                  <td>Preserva capital y genera rendimientos estables.</td>
                </tr>
                <tr>
                  <td>Activo Moderado (ETFs, Acciones)</td>
                  <td>50%</td>
                  <td>Balance entre seguridad y crecimiento.</td>
                </tr>
                <tr>
                  <td>Activo Arriesgado (Criptomonedas, Startups)</td>
                  <td>20%</td>
                  <td>Mayor riesgo pero potencial de crecimiento alto.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
    
        <!-- Bot√≥n Redirigir a Calculadora -->
        <div class="text-center mt-5 mb-5">
          <button type="button" class="btn btn-primary btn-lg" style="padding-left: 2rem; padding-right: 2rem;" onclick="window.location.href='#simulador'">Ir a la Calculadora de Inter√©s Compuesto</button>
        </div>
      </div>
    </section>
    
       

    <!-- NEWSLETTER -->
    <section id="newsletter" class="section">
      <div class="container">
        <h2>Newsletter</h2>
        <p>√önete para recibir contenidos exclusivos.</p>
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="section">
      <div class="container">
        <h2>Contacto</h2>
        <p>Formulario y datos de contacto.</p>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div class="container">
      <p>&copy; 2025 Carlos Asesor Financiero. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // Men√∫ responsive
    document.querySelector('.nav-toggle').onclick = () => {
      document.querySelector('nav ul').classList.toggle('show');
    };
    </script>

  <!-- Test de Perfil -->
  <script>
(function () {
  const steps       = Array.from(document.querySelectorAll('#test-perfil .step'));
  const prevBtn     = document.getElementById('prev-btn');
  const nextBtn     = document.getElementById('next-btn');
  const form        = document.getElementById('test-form');
  const result      = document.getElementById('test-result');
  const txt         = document.getElementById('perfil-texto');
  const desc        = document.getElementById('perfil-desc');
  const retElem     = document.getElementById('perfil-return'); // Ganancia anual
  const counterElem = document.getElementById('step-counter');
  const total       = steps.length;
  let current       = 0;

  // Mapa de perfiles con su descripci√≥n y tasa de retorno
  const perfilInfo = {
    'Conservador': { desc: 'Buscas seguridad.', return: '5%' },
    'Moderado':    { desc: 'Aceptas volatilidad.', return: '7%' },
    'Agresivo':    { desc: 'Asumes riesgo.', return: '10%' }
  };

  // Mostrar paso actual
  function showStep(i) {
    steps.forEach((s, idx) => s.classList.toggle('active', idx === i));
    prevBtn.disabled          = i === 0;
    nextBtn.textContent       = i === total - 1 ? 'Terminar' : 'Siguiente';
    counterElem.textContent   = `${i + 1} de ${total}`;
  }

  // Bot√≥n "Anterior"
  prevBtn.addEventListener('click', () => {
    if (current > 0) showStep(--current);
  });

  // Bot√≥n "Siguiente"
  nextBtn.addEventListener('click', () => {
    // Validaci√≥n: ¬øse ha marcado alguna opci√≥n?
    const checked = [...steps[current].querySelectorAll('input')].some(i => i.checked);
    if (!checked) return alert('Por favor, selecciona una opci√≥n.');

    // Si no es √∫ltima pregunta, avanzamos
    if (current < total - 1) {
      showStep(++current);
    } else {
      // Calcular puntuaci√≥n total
      const score = [...new FormData(form).values()]
                  .reduce((sum, v) => sum + parseInt(v, 10), 0);

      // Determinar el perfil
      let perfil;
      if (score <= 20) {
        perfil = 'Conservador';
      } else if (score <= 35) {
        perfil = 'Moderado';
      } else {
        perfil = 'Agresivo';
      }

      // Rellenar resultado
      txt.textContent    = perfil;
      desc.textContent   = perfilInfo[perfil].desc;
      retElem.textContent = `${perfilInfo[perfil].return}`;

      // Mostrar resultado
      result.style.display = 'block';
      form.style.display   = 'none';

      // Opcional: scroll autom√°tico al resultado
      result.scrollIntoView({ behavior: 'smooth' });
    }
  });

  // Mostrar el primer paso al cargar la p√°gina
  document.addEventListener('DOMContentLoaded', () => showStep(0));
})();
</script>

<!-- CALCULADORA DE INTERES COMPUESTO -->
<!-- CDN de Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- CDN de jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- Script de la calculadora -->
<script>
  let chartPie = null;
  let chartBar = null;
  let chartLine = null;
  
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("calculatorForm");
    const resultsBox = document.getElementById("results");
    const gridBox = document.getElementById("resultadosGrid");
    const cerrarBtn = document.getElementById("cerrarCalculoBtn");
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const initial = parseFloat(document.getElementById("initialAmount").value);
      const deposit = parseFloat(document.getElementById("periodicDeposit").value);
      const rate = parseFloat(document.getElementById("interestRate").value) / 100;
      const years = parseInt(document.getElementById("years").value);
  
      const result = calculateCompoundInterest(initial, deposit, rate, years);
      displayResults(result, initial);
  
      // Mostrar resultados
      resultsBox.classList.add("show");
      gridBox.classList.add("show");
    });
  
    cerrarBtn.addEventListener("click", function () {
      resultsBox.classList.remove("show");
      gridBox.classList.remove("show");
      form.scrollIntoView({ behavior: "smooth" });
    });
  });
  
  function calculateCompoundInterest(initial, monthlyDeposit, rate, years) {
  let total = initial;
  let totalDeposits = initial;
  let totalInterest = 0;
  let depositTotal = 0; // fuera del bucle
  let data = [];

  for (let year = 1; year <= years; year++) {
  let yearlyDeposit = monthlyDeposit * 12;
  let interest = total * rate;
  total += yearlyDeposit + interest;
  depositTotal += yearlyDeposit; // acumulamos aportaciones
  totalDeposits += yearlyDeposit;
  totalInterest += interest;

  data.push({
    year,
    deposit: yearlyDeposit,
    depositTotal,       // nuevo campo
    interest,
    interestTotal: totalInterest,
    balance: total
  });
}

  return {
    finalTotal: total,
    totalDeposits,
    totalInterest,
    data
  };
}

  
  function displayResults(result, initial) {
    // N√∫meros
    document.getElementById("totalSaved").textContent = `‚Ç¨${result.finalTotal.toFixed(2)}`;
    document.getElementById("totalDeposited").textContent = `‚Ç¨${result.totalDeposits.toFixed(2)} (Anual)`;
    document.getElementById("totalInterest").textContent = `‚Ç¨${result.totalInterest.toFixed(2)}`;
  
    // Tablas
    const tbodyLeft = document.getElementById("tableBodyLeft");
    const tbodyRight = document.getElementById("tableBodyRight");
    tbodyLeft.innerHTML = "";
    tbodyRight.innerHTML = "";
  
    result.data.forEach((row, index) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${row.year}</td>
        <td>‚Ç¨${row.deposit.toFixed(2)}</td>
        <td>‚Ç¨${row.interest.toFixed(2)}</td>
        <td>‚Ç¨${row.balance.toFixed(2)}</td>
      `;
      if (index < 13) {
        tbodyLeft.appendChild(tr);
      } else {
        tbodyRight.appendChild(tr);
      }
    });
  
    // Destruir anteriores
    if (chartPie) chartPie.destroy();
    if (chartBar) chartBar.destroy();
    if (chartLine) chartLine.destroy();
  
    chartPie = new Chart(document.getElementById("pieChart"), {
  type: "pie",
  data: {
    labels: ["Capital Inicial", "Aportaciones Mensuales", "Intereses"],
    datasets: [{
      data: [initial, result.totalDeposits - initial, result.totalInterest],
      backgroundColor: [
        "rgba(192, 132, 252, 0.85)",  // lila (capital inicial)
        "rgba(13, 110, 253, 0.85)",   // azul (aportaciones)
        "rgba(111, 66, 193, 0.85)"    // p√∫rpura (intereses)
      ],
      borderColor: "#ffffff",
      borderWidth: 2,
      hoverOffset: 18
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    animation: {
      animateRotate: true,
      duration: 1000,
      easing: "easeOutQuart"
    },
    plugins: {
      legend: {
        display: false
      },
      tooltip: {
        callbacks: {
          label: function (context) {
            const label = context.label || '';
            const value = context.parsed || 0;
            const total = context.dataset.data.reduce((a, b) => a + b, 0);
            const percentage = ((value / total) * 100).toFixed(1);
            return `${label}: ‚Ç¨${value.toLocaleString()} (${percentage}%)`;
          }
        }
      }
    }
  }
});



// ‚úÖ Leyenda personalizada centrada
document.getElementById("leyendaPieChart").innerHTML = `
  <div style="display:flex; justify-content:center; gap:1.5rem; margin-top:1rem;">
    <span style="display:flex; align-items:center; gap:0.5rem;">
      <span style="width:14px; height:14px; background:#0d6efd; border-radius:3px;"></span> Aportaciones
    </span>
    <span style="display:flex; align-items:center; gap:0.5rem;">
      <span style="width:14px; height:14px; background:#6f42c1; border-radius:3px;"></span> Intereses
    </span>
  </div>
`;


  
// üî¢ Calcular el m√°ximo del a√±o para escalar el eje Y
const maxYAcumulado = Math.ceil(
  Math.max(...result.data.map(d =>
    initial + d.depositTotal + d.interestTotal
  )) * 1.05
);

// üìä Gr√°fico de barras acumuladas por a√±o
const ctxAcumulado = document.getElementById("barChartAcumulado");
if (window.chartAcumulado) window.chartAcumulado.destroy(); // Destruir si ya existe

window.chartAcumulado = new Chart(ctxAcumulado, {
  type: "bar",
  data: {
    labels: result.data.map(d => d.year),
    datasets: [
      {
        label: "Capital Inicial",
        data: result.data.map(() => initial),
        backgroundColor: "#c084fc", // lila
        stack: "stack2"
      },
      {
        label: "Aportaciones Acumuladas",
        data: result.data.map(d => d.depositTotal),
        backgroundColor: "#4f81bd", // azul
        stack: "stack2"
      },
      {
        label: "Intereses Acumulados",
        data: result.data.map(d => d.interestTotal),
        backgroundColor: "#76c477", // verde
        stack: "stack2"
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: "bottom",
        labels: {
          font: { size: 14, weight: "bold" },
          color: "#333"
        }
      },
      tooltip: {
        callbacks: {
          label: ctx => `‚Ç¨${ctx.raw.toLocaleString()}`
        }
      }
    },
    scales: {
      x: {
        stacked: true,
        grid: { display: false },
        ticks: {
          color: "#555",
          font: { size: 12 }
        },
        barPercentage: 0.7,
        categoryPercentage: 0.6
      },
      y: {
        stacked: true,
        beginAtZero: true,
        max: maxYAcumulado,
        grid: { color: "#e0e0e0" },
        ticks: {
          callback: value => `‚Ç¨${value.toLocaleString()}`,
          color: "#555",
          font: { size: 12 }
        }
      }
    }
  }
});



    };
  
    // L√≠nea de balance acumulado
    chartLine = new Chart(document.getElementById("lineChart"), {
      type: "line",
      data: {
        labels: result.data.map(d => d.year),
        datasets: [{
          label: "Balance Acumulado",
          data: result.data.map(d => d.balance),
          borderColor: "#0d6efd",
          backgroundColor: "rgba(13, 110, 253, 0.15)",
          fill: true,
          tension: 0.3,
          pointRadius: 3,
          pointHoverRadius: 6
        }]
      },
      options: {
        responsive: true,
        animation: {
          duration: 1000,
          easing: "easeOutQuart"
        }
      }
    });
  
  </script>
  

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("calculatorForm");
    const results = document.getElementById("results");
    const grid = document.getElementById("resultadosGrid");
    const cerrarBtn = document.getElementById("cerrarCalculoBtn");
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const initial = parseFloat(document.getElementById('initialAmount').value);
      const deposit = parseFloat(document.getElementById('periodicDeposit').value);
      const rate = parseFloat(document.getElementById('interestRate').value) / 100;
      const years = parseInt(document.getElementById('years').value);
  
      const result = calculateCompoundInterest(initial, deposit, rate, years);
      displayResults(result, initial);
      mostrarGraficoBarras(result, initial);
  
      // Mostrar bloques
      results.classList.add("show");
      grid.classList.add("show");
    });
  
    cerrarBtn.addEventListener("click", function () {
      results.classList.remove("show");
      grid.classList.remove("show");
      form.scrollIntoView({ behavior: "smooth" });
    });
  });
  </script>
  
<script>
  (function () {
    const steps = Array.from(document.querySelectorAll('#test-patrimonio .step'));
    const prevBtn = document.getElementById('prev-btn-patrimonio');
    const nextBtn = document.getElementById('next-btn-patrimonio');
    const form = document.getElementById('test-patrimonio');
    const result = document.getElementById('diagnostico-final');
    const counterElem = document.getElementById('step-counter-patrimonio');
    const total = steps.length;
    let current = 0;
  
    function showStep(i) {
      steps.forEach((s, idx) => s.classList.toggle('active', idx === i));
      prevBtn.disabled = i === 0;
      nextBtn.textContent = i === total - 1 ? 'Terminar' : 'Siguiente';
      counterElem.textContent = `${i + 1} de ${total}`;
    }
  
    prevBtn.addEventListener('click', () => {
      if (current > 0) showStep(--current);
    });
  
    nextBtn.addEventListener('click', () => {
  const checked = [...steps[current].querySelectorAll('input')].some(i => i.checked);
  if (!checked) return alert('Por favor, selecciona una opci√≥n.');

  if (current < total - 1) {
    showStep(++current);
  } else {
    const respuestas = new FormData(form);
    let siCount = 0;
    for (let value of respuestas.values()) {
      if (value === 's√≠') siCount++;
    }

    const resultadoElem = document.getElementById("nivel-proteccion");
    const mensajeElem = document.getElementById("mensaje-proteccion");

    let nivel = "", mensaje = "";

    if (siCount <= 2) {
      nivel = "Baja";
      mensaje = "Tu nivel de protecci√≥n es limitado. Te recomendamos revisar tus seguros, fondo de emergencia y estructura legal b√°sica.";
    } else if (siCount <= 4) {
      nivel = "Media";
      mensaje = "Vas por buen camino. A√∫n puedes mejorar en diversificaci√≥n y anticiparte legalmente a posibles imprevistos.";
    } else {
      nivel = "Alta";
      mensaje = "Enhorabuena. Tu protecci√≥n patrimonial cubre aspectos esenciales y refleja una buena planificaci√≥n.";
    }

    resultadoElem.textContent = nivel;
    mensajeElem.textContent = mensaje;

    form.style.display = 'none';
    result.style.display = 'block';
    document.getElementById('diagnostico-final').classList.remove('d-none');
    document.getElementById('diagnostico-final').scrollIntoView({ behavior: 'smooth' });
  }
});

  
    document.addEventListener('DOMContentLoaded', () => showStep(0));
  })();
  </script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const mostrarBtn = document.getElementById("mostrar-test-btn");
    const testWrapper = document.querySelector("#proteccion .test-wrapper");

    if (mostrarBtn && testWrapper) {
      mostrarBtn.addEventListener("click", function () {
        testWrapper.style.display = "flex";
        mostrarBtn.style.display = "none";

        const yOffset = -150; // ajusta esto para centrarlo mejor
        const y = testWrapper.getBoundingClientRect().top + window.pageYOffset + yOffset;

        window.scrollTo({ top: y, behavior: "smooth" });
      });
    }
  });
  </script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("nav a");
  
    function activateMenu() {
      let current = "";
  
      sections.forEach((section) => {
        const sectionTop = section.offsetTop - 120;
        if (pageYOffset >= sectionTop) {
          current = section.getAttribute("id");
        }
      });
  
      navLinks.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${current}`) {
          link.classList.add("active");
        }
      });
    }
  
    window.addEventListener("scroll", activateMenu);
  });
  </script>
  
  



</body>
</html>
