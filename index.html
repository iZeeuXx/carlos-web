<!DOCTYPE html>
<html lang="es">
<head>

  <!-- ‚úÖ SEO B√ÅSICO SIN RRSS -->
<meta name="description" content="Asesor√≠a financiera personalizada en ETFs, acciones y real estate. Aprende a invertir sin tecnicismos y con acompa√±amiento real.">
<link rel="canonical" href="https://carlosinc.netlify.app/" />
<meta name="robots" content="index, follow">
<title>Carlos ‚Ä¢ Asesor√≠a Financiera Personalizada</title>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carlos ‚Ä¢ Asesor√≠a Financiera</title>
  <link rel="stylesheet" href="style.css" />

  <!-- AOS Animations -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

  <!-- Librer√≠as externas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>

<!-- ‚úÖ HEADER MEJORADO Y FUNCIONAL -->
<header role="banner" class="header-elevado">
  <div class="container header-content">
    <div class="logo-area">
      <a href="#inicio" class="logo-link" aria-label="Inicio">
        <h1 class="logo">Carlos<span> ‚Ä¢ Asesor√≠a Financiera</span></h1>
      </a>
    </div>

    <button class="nav-toggle" aria-label="Abrir men√∫ m√≥vil" aria-expanded="false">‚ò∞</button>

    <nav role="navigation" aria-label="Men√∫ principal">
      <ul class="nav-links">
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#quien-soy">Qui√©n Soy</a></li>
        <li><a href="#casos-exito">Casos de √âxito</a></li>
        <li><a href="#modelos">Modelos</a></li>
        <li><a href="#asesorias">Asesor√≠as</a></li>
        <li><a href="#herramientas">Herramientas</a></li>
        <li><a href="#simulador">Simulador</a></li>
        <li><a href="#test combinados">Tests</a></li>
        <li><a href="#proteccion">Protecci√≥n</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>
    </nav>
  </div>
</header>

  

  <!-- CONTENIDO PRINCIPAL -->
  <main>

    <!-- HERO SECTION -->
<section id="inicio" class="hero" data-aos="fade-up">
      <div class="container hero-content">
        <h2>Bienvenido a tu libertad financiera</h2>
        <p>Asesor√≠a personalizada en ETFs, acciones y real estate para que tomes el control de tu dinero.</p>
        <a href="#newsletter" class="btn-primary">Suscr√≠bete al Newsletter</a>
      </div>
    </section>

    <!-- QUI√âN SOY -->
      <section id="quien-soy" class="section section-personal section-bg-light" data-aos="fade-up">
      <div class="quien-soy-box">
        <h2>Qui√©n soy</h2>
        <p>
          Hace unos a√±os decid√≠ tomar las riendas de mis finanzas personales. No siempre tuve el control, pero me obsesion√© con aprender, me form√©, y convert√≠ esa experiencia en algo √∫til para otros.
        </p>
        <p>
          Me di cuenta de que much√≠simas personas nunca han recibido una verdadera educaci√≥n financiera. Lo poco que existe suele ser t√©cnico, inaccesible o mal explicado. As√≠ que decid√≠ crear algo distinto: pr√°ctico, claro y bien dise√±ado.
        </p>
        <p>
          Soy licenciado en Econom√≠a, especializado en herramientas de an√°lisis financiero. Esta web nace con un objetivo: <strong>acercar las finanzas a quienes m√°s lo necesitan</strong>.
        </p>
      
  <!-- Contenedor centrado -->
  <div class="centrado-bloque-final">
    <a href="#asesorias" class="btn-primary">Conoce mis asesor√≠as</a>
    <div class="firma">
      <span><strong>Carlos</strong></span>
      <span class="rol">Asesor financiero</span>
    </div>
  </div>
</div>    
    </section>    
    
    <!-- CASOS DE √âXITO -->
<section id="casos-exito" class="section section-casos-exito" data-aos="fade-up">
      <div class="container">
        <h2>Casos de √âxito</h2>
        <div class="casos-grid">
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=LG" alt="Laura G." />
            <h4>Laura G.</h4>
            <p>‚ÄúGracias a la asesor√≠a, logr√© ahorrar 200‚Ç¨ al mes y empec√© a invertir en ETFs. Ahora tengo m√°s tranquilidad y objetivos reales.‚Äù</p>
          </div>
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=PM" alt="Pedro M." />
            <h4>Pedro M.</h4>
            <p>‚ÄúPas√© de no entender nada de inversiones a gestionar mi capital con confianza. Carlos me dio las herramientas justas y claras.‚Äù</p>
          </div>
          <div class="caso-card">
            <img src="https://via.placeholder.com/80?text=AJ" alt="Ana y Jorge" />
            <h4>Ana y Jorge</h4>
            <p>‚ÄúComo familia con ingresos bajos, no pens√°bamos que pod√≠amos invertir. Ahora tenemos un fondo com√∫n que crece cada mes.‚Äù</p>
          </div>
        </div>
      </div>
    </section>

    <!-- MODELOS DE INVERSI√ìN POR OBJETIVO -->
<section id="modelos" class="section section-modelos-objetivo zoom-pequeno" data-aos="fade-up">
      <div class="container">
        <h2>Modelos de Inversi√≥n por Objetivo</h2>
        <p class="subtitulo">Dise√±o de carteras personalizadas seg√∫n tus metas financieras</p>
        <p class="modelo-extra-desc">
          Todos estos modelos se adaptan a tu situaci√≥n actual y evolucionan contigo.  
          Analizamos tus ingresos, objetivos y tolerancia al riesgo para ofrecerte una estrategia realista y sostenible.
        </p>

        <div class="objetivo-grid filas-dos-niveles">
          <!-- Fila 1 -->
          <div class="fila fila-1">
            <div class="objetivo-card">
              <h3>üè° Comprar una vivienda</h3>
              <p>Ahorro planificado + inversi√≥n conservadora a 3‚Äì5 a√±os. Ideal para alcanzar una entrada sin depender del banco.</p>
              <a href="#contacto" class="modelo-btn modelo-vivienda" data-modelo="Comprar una vivienda">Quiero este modelo</a>
            </div>

            <div class="objetivo-card">
              <h3>üíº Plan de jubilaci√≥n</h3>
              <p>Carteras a largo plazo con ETFs globales, baja rotaci√≥n y efecto compuesto progresivo.</p>
              <a href="#contacto" class="modelo-btn modelo-jubilacion" data-modelo="Plan de jubilaci√≥n">Quiero este modelo</a>
            </div>

            <div class="objetivo-card">
              <h3>üí∏ Ingresos mensuales</h3>
              <p>REITs, dividendos y activos defensivos para generar flujo sin necesidad de vender.</p>
              <a href="#contacto" class="modelo-btn modelo-ingresos" data-modelo="Ingresos mensuales">Quiero este modelo</a>
            </div>
          </div>

          <!-- Fila 2 -->
          <div class="fila fila-2">
            <div class="objetivo-card">
              <h3>üöÄ Crecimiento agresivo</h3>
              <p>Estrategias con alto potencial, volatilidad controlada y sectores emergentes.</p>
              <a href="#contacto" class="modelo-btn modelo-crecimiento" data-modelo="Crecimiento agresivo">Quiero este modelo</a>
            </div>

            <div class="objetivo-card">
              <h3>üß± Protecci√≥n patrimonial</h3>
              <p>Inversi√≥n diversificada, refugios de valor y asesor√≠a estructural para tu tranquilidad.</p>
              <a href="#contacto" class="modelo-btn modelo-patrimonial" data-modelo="Protecci√≥n patrimonial">Quiero este modelo</a>
            </div>
          </div>
        </div>

        <!-- BOT√ìN CENTRAL -->
        <div style="text-align: center; margin-top: 2rem;">
          <a href="#contacto" class="btn-primary btn-estrecho">Solicita tu asesor√≠a personalizada</a>
        </div>
      </div>
    </section>

    <!-- ASESOR√çAS -->
<section id="asesorias" class="section section-asesorias section-bg-dark zoom-pequeno" data-aos="fade-up">
        <h2>Elige tu plan de asesor√≠a</h2>
        <div class="planes-grid">
    
          <!-- Plan Accesible -->
          <div class="plan-card accesible">
            <h3>üü¶ Accesible</h3>
            <p class="precio">9‚ÄØ‚Ç¨/mes</p>
            <p class="descripcion-accesible">
              Servicio dedicado a quienes ingresan menos de 1500‚ÄØ‚Ç¨/mes o no tienen formaci√≥n financiera.  
              Accede a asesoramiento real por una cuota asequible.
            </p>
            <ul>
              <li>‚úîÔ∏è Asesor√≠a b√°sica mensual</li>
              <li>‚úîÔ∏è Revisi√≥n de cartera cada 45 d√≠as</li>
              <li>‚úîÔ∏è Acceso a grupo privado b√°sico</li>
              <li>‚úîÔ∏è Suscripci√≥n a newsletter</li>
            </ul>
            <a href="#contacto" class="btn-primary">Quiero este plan</a>
          </div>

          <!-- Plan Premium -->
          <div class="plan-card premium">
            <h3>üî∂ Premium</h3>
            <p class="precio">29‚ÄØ‚Ç¨/mes</p>
            <p class="descripcion-premium">
              Pensado para quienes quieren dar un salto real en su educaci√≥n financiera.  
              Ideal si ya inviertes o quieres empezar con una estrategia clara,  
              seguimiento personalizado y contenido exclusivo cada semana.
            </p>
            <ul>
              <li>‚ú® Todo lo del plan Accesible</li>
              <li>üìä Revisi√≥n mensual de cartera</li>
              <li>üìû Llamada 1:1 mensual (30 min)</li>
              <li>üì∞ Blog privado con an√°lisis semanal</li>
              <li>‚ö° Soporte prioritario</li>
              <li>üì¨ Newsletter extendida</li>
            </ul>
            <a href="#contacto" class="btn-primary">Quiero el Premium</a>
          </div>

    
        </div>
      </div>
    </section>

    <!--HERRAMIENTAS-->
<section id="herramientas" class="section section-bg-light" data-aos="fade-up">
  <div class="container">
    <h2>üß∞ Herramientas Financieras</h2>
    <p class="subtitulo" style="text-align:center; max-width:720px; margin: 0 auto;">
      Recursos pr√°cticos para transformar tu relaci√≥n con el dinero.
    </p>

    <div class="grid-herramientas">
      <!-- Pack Starter -->
      <div class="herramienta-card destacado">
        <h3>üì¶ Pack Starter</h3>
        <p class="precio">3,99 ‚Ç¨</p>
        <p>Temario b√°sico + Mi Excel Financiero versi√≥n personal. Ideal para empezar a tomar control real de tus finanzas por menos que un men√∫ del McDonald‚Äôs üçîüìà.</p>
        <button class="btn-estrecho" onclick="mostrarPackStarter()">Ver detalles</button>
      </div>

      <!-- Mi Excel Financiero -->
      <div class="herramienta-card">
        <h3>üìä Mi Excel Financiero</h3>
        <p class="precio">2,99 ‚Ç¨</p>
        <p>Plantilla profesional para controlar tus ingresos, gastos, metas y ahorro. F√°cil de usar, con gr√°ficos autom√°ticos.</p>
        <button class="btn-estrecho" onclick="mostrarExcelFinanciero()">Ver detalles</button>
      </div>

      <!-- Excel Empresarial -->
      <div class="herramienta-card">
        <h3>üíº Excel Empresarial</h3>
        <p class="precio">6,99 ‚Ç¨</p>
        <p>Control de facturaci√≥n, beneficios, IRPF/IVA y gastos. Dise√±ado para aut√≥nomos, freelancers y peque√±os negocios.</p>
        <button class="btn-estrecho" onclick="mostrarExcelEmpresarial()">Ver detalles</button>
      </div>

      <!-- Temario por bloques -->
      <div class="herramienta-card">
        <h3>üìò Temario por Bloques</h3>
        <p class="precio">Desde 0,99 ‚Ç¨</p>
        <p>Aprende paso a paso c√≥mo dominar tus finanzas. Desde educaci√≥n b√°sica hasta estrategias de inversi√≥n, protecci√≥n y optimizaci√≥n fiscal.</p>
        <button class="btn-estrecho" onclick="mostrarTemarioPorBloques()">Ver detalles</button>
      </div>

      <!-- Tests imprimibles -->
      <div class="herramienta-card">
        <h3>üß† Tests Imprimibles</h3>
        <p class="precio">Gratis</p>
        <p>Autodiagn√≥sticos para saber si est√°s listo para invertir, emprender o blindar tu patrimonio.</p>
        <button class="btn-estrecho" onclick="mostrarTestsImprimibles()">Ver detalles</button>
      </div>
    </div>
  </div>
    </section>

    <!-- CALCADORA DE INTER√âS COMPUESTO -->
<section id="simulador" class="section-compound section-bg-dark" data-aos="fade-up">
      <div class="simulador-wrapper">
        <h2>Calculadora de Inter√©s Compuesto</h2>
    
        <form id="calculatorForm">
          <div class="input-row">
            <div class="input-group">
              <label for="initialAmount">Capital Inicial</label>
              <input type="number" step="0.01" id="initialAmount" value="1000" required />
            </div>
            <div class="input-group">
              <label for="periodicDeposit">Aportaci√≥n Mensual</label>
              <input type="number" step="0.01" id="periodicDeposit" value="200" required />
            </div>
            <div class="input-group">
              <label for="interestRate">Tasa Anual (%)</label>
              <input type="number" step="0.01" id="interestRate" value="5" required />
            </div>
            <div class="input-group">
              <label for="years">Duraci√≥n (a√±os)</label>
              <input type="number" id="years" value="20" required />
            </div>
          </div>
    
          <div class="button-group">
            <button type="submit" class="btn-primary">Calcular</button>
            <button type="button" class="btn-secondary" onclick="exportPDF()">Exportar a PDF</button>
            <button type="button" class="btn-info" onclick="toggleDarkMode()">Modo Oscuro</button>
          </div>
        </form>
    
        <div id="results" class="result-box">
          <h3>Resultado Final</h3>
          <p><strong>Total Acumulado:</strong> <span id="totalSaved"></span></p>
          <p><strong>Total Aportado:</strong> <span id="totalDeposited"></span></p>
          <p><strong>Intereses Ganados:</strong> <span id="totalInterest"></span></p>
          <button type="button" id="cerrarCalculoBtn" class="btn-secondary">Cerrar c√°lculo</button>
        </div>
    
    <!-- RESULTADOS GR√ÅFICOS Y TABLAS -->
    <div id="resultadosGrid" class="resultados-grid">
      <!-- GR√ÅFICOS: arriba en horizontal -->
      <div class="graficos-box">
        <!-- PIE CHART -->
        <div class="grafico grafico-tarta">
          <canvas id="pieChart" width="400" height="400"></canvas>
          <div class="leyenda-pie" id="leyendaPieChart"></div>
        </div>
      

<!-- NUEVO GR√ÅFICO DE BARRAS ACUMULADAS -->
    <div class="grafico grafico-barras">
  <canvas id="barChartAcumulado" width="700" height="400"></canvas>
   </div>

      
   <!-- TABLAS: abajo en dos columnas -->
       <div class="tablas-box">
        <div class="tabla">
          <table class="table">
            <thead>
              <tr>
                <th>A√±o</th><th>Aportaci√≥n</th><th>Inter√©s</th><th>Balance</th>
              </tr>
            </thead>
            <tbody id="tableBodyLeft"></tbody>
          </table>
        </div>
        <div class="tabla">
          <table class="table">
            <thead>
              <tr>
                <th>A√±o</th><th>Aportaci√≥n</th><th>Inter√©s</th><th>Balance</th>
              </tr>
            </thead>
            <tbody id="tableBodyRight"></tbody>
          </table>
        </div>
      </div>
    </div>

    </section>


    <!--TEST COMBINADOS-->
<section id="test combinados" class="section section-bg-light">
  <div class="container">
    <h2>üß† Diagn√≥stico Financiero Inteligente</h2>
    <p class="subtitulo" style="text-align: center; max-width: 720px; margin: 0 auto;">
    Descubre tu perfil inversor y el estado de tu protecci√≥n patrimonial.
    </p>
    <div style="text-align:center; margin-top:2rem;">
      <button id="empezar-btn" >‚ú® Empezar diagn√≥stico</button>
    </div>

  <!-- BLOQUE QUE SE DESPLIEGA AL HACER CLIC -->
    <div id="bloque-test" style="display:none; margin-top: 3rem;">
      <div class="test-grid">

    
    <!-- === TEST DE INVERSOR === -->
      <div class="test-column" id="bloque-inversor">
      <h3>üîπ Test de Perfil Inversor</h3>
        <div class="progress-bar-outer">
        <div class="progress-bar-inner" id="progress-inv"></div>
       </div>

         <form id="test-inversor">
        <div id="inversor-steps"></div>
        <div class="buttons">
          <button type="button" id="prev-inv" class="btn-primary">Anterior</button>
          <button type="button" id="next-inv" class="btn-primary">Siguiente</button>
        </div>
      </form>
      <div id="resultado-inversor" class="test-result" style="display:none;">
        <h3>üéØ Tu perfil es: <span id="perfil-texto"></span></h3>
        <p id="perfil-desc"></p>
      </div>
    </div>

    <!-- === TEST PATRIMONIAL === -->
      <div class="test-column" id="bloque-patrimonio">
      <h3>üî∏ Test de Protecci√≥n Patrimonial</h3>
      <div class="progress-bar-outer">
      <div class="progress-bar-inner" id="progress-pat"></div>
      </div>

      <form id="test-patrimonio">
        <div id="patrimonio-steps"></div>
        <div class="buttons">
          <button type="button" id="prev-pat" class="btn-primary">Anterior</button>
          <button type="button" id="next-pat" class="btn-primary">Siguiente</button>
        </div>
      </form>
      <div id="resultado-patrimonio" class="test-result" style="display:none;">
        <h3>üõ°Ô∏è Nivel de protecci√≥n: <span id="proteccion-texto"></span></h3>
        <p id="proteccion-desc"></p>
      </div>
    </div>

    <!-- RESULTADO COMBINADO -->
    <div id="bloque-combinado" class="test-result destacado" style="display: none; margin-top: 3rem;">
      <h3>üß¨ Resultado Combinado</h3>
      <p id="resultado-combinado">
        Completa ambos tests para ver tu diagn√≥stico global.
      </p>
    </div>

  </div>
</section>


    <!-- TEST DE INVERSION -->
    <section id="test-perfil" class="section section-test section-bg-light">
  <div class="container test-wrapper">

    <!-- Intro con bot√≥n -->
    <div class="intro-test">
      <h2>¬øQu√© tipo de inversor eres?</h2>
      <p>
        Haz este test r√°pido y descubre si tu perfil es conservador, moderado o agresivo.
        As√≠ podremos ayudarte a invertir con m√°s confianza y seg√∫n tu estilo real.
      </p>
      <button id="mostrar-test-inversor" class="btn btn-estrecho">
        ¬°S√≠! Quiero descubrir el tipo de plan que mejor me venga
      </button>
    </div>

    <!-- Bloque oculto del test -->
    <div id="bloque-test-completo" style="display: none;">
      <div id="step-counter" class="step-counter">1 de 10</div>

      <form id="test-form">
        <div class="centered-content">

          <!-- Preguntas del test -->
          <div class="step active">
            <p>1. ¬øCu√°l es tu objetivo principal?</p>
            <label><input type="radio" name="q1" value="1" required> Seguridad</label>
            <label><input type="radio" name="q1" value="3"> Ingresos</label>
            <label><input type="radio" name="q1" value="5"> Crecimiento</label>
          </div>

          <div class="step">
            <p>2. ¬øHorizonte de inversi√≥n?</p>
            <label><input type="radio" name="q2" value="1" required> &lt; 1 a√±o</label>
            <label><input type="radio" name="q2" value="3"> 1‚Äì5 a√±os</label>
            <label><input type="radio" name="q2" value="5"> &gt; 5 a√±os</label>
          </div>

          <div class="step">
            <p>3. Reacci√≥n ante -10% de ca√≠da:</p>
            <label><input type="radio" name="q3" value="1" required> Vendo todo</label>
            <label><input type="radio" name="q3" value="3"> Espero</label>
            <label><input type="radio" name="q3" value="5"> Compro m√°s</label>
          </div>

          <div class="step">
            <p>4. % de patrimonio a invertir:</p>
            <label><input type="radio" name="q4" value="1" required> &lt; 20%</label>
            <label><input type="radio" name="q4" value="3"> 20‚Äì50%</label>
            <label><input type="radio" name="q4" value="5"> &gt; 50%</label>
          </div>

          <div class="step">
            <p>5. Nivel de conocimientos:</p>
            <label><input type="radio" name="q5" value="1" required> B√°sicos</label>
            <label><input type="radio" name="q5" value="3"> Intermedios</label>
            <label><input type="radio" name="q5" value="5"> Avanzados</label>
          </div>

          <div class="step">
            <p>6. ¬øNecesitas liquidez frecuente?</p>
            <label><input type="radio" name="q6" value="1" required> S√≠</label>
            <label><input type="radio" name="q6" value="3"> A veces</label>
            <label><input type="radio" name="q6" value="5"> No</label>
          </div>

          <div class="step">
            <p>7. ¬øCon qu√© frecuencia revisar√°s tus inversiones?</p>
            <label><input type="radio" name="q7" value="1" required> Diario</label>
            <label><input type="radio" name="q7" value="3"> Mensual</label>
            <label><input type="radio" name="q7" value="5"> Anual</label>
          </div>

          <div class="step">
            <p>8. ¬øComprendes bien el inter√©s compuesto?</p>
            <label><input type="radio" name="q8" value="1" required> No</label>
            <label><input type="radio" name="q8" value="3"> Algo</label>
            <label><input type="radio" name="q8" value="5"> S√≠</label>
          </div>

          <div class="step">
            <p>9. ¬øHas invertido antes?</p>
            <label><input type="radio" name="q9" value="1" required> Nunca</label>
            <label><input type="radio" name="q9" value="3"> Pocas veces</label>
            <label><input type="radio" name="q9" value="5"> Con frecuencia</label>
          </div>

          <div class="step">
            <p>10. ¬øTe afectan las noticias de mercado?</p>
            <label><input type="radio" name="q10" value="1" required> Mucho</label>
            <label><input type="radio" name="q10" value="3"> Algo</label>
            <label><input type="radio" name="q10" value="5"> Casi nada</label>
          </div>
        </div>

        <!-- Botones -->
        <div class="buttons">
          <button type="button" id="prev-btn" class="btn-primary" disabled>Anterior</button>
          <button type="button" id="next-btn" class="btn-primary">Siguiente</button>
        </div>
      </form>

      <!-- Resultado -->
      <div id="test-result" class="test-result" style="display:none;">
        <div id="emoji-perfil" style="font-size: 2.5rem; margin-bottom: 1rem;">üéØ</div>
        <h3>Tu perfil de riesgo es: <span id="perfil-texto"></span></h3>
        <p id="perfil-desc"></p>
        <p>üìä Rendimiento anual estimado: <strong id="perfil-return"></strong></p>

        <button id="btn-plan-recomendado" class="btn-primary" style="margin-top: 2rem;">Ver plan recomendado</button>
      </div>


    </div> <!-- Fin bloque-test-completo -->

  </div> <!-- Fin container -->
    </section>


    <!-- PROTECCI√ìN PATRIMONIAL -->
<section id="proteccion" class="section section-proteccion" data-aos="fade-up">
      <div class="container">
        <h2 class="text-center mb-4">üõ°Ô∏è Protecci√≥n Patrimonial</h2>
        <p class="lead text-center fs-5 mb-4" style="max-width: 700px; margin: 0 auto;">
          Descubre qu√© tipo de plan de protecci√≥n patrimonial es m√°s adecuado para ti.
        </p>
    
        <!-- BOT√ìN PARA MOSTRAR TEST -->
        <div class="cta-scroll-container">
          <button class="btn-scroll-diagnostico" onclick="document.getElementById('test combinados').scrollIntoView({ behavior: 'smooth' })">
            üåç S√≠, quiero descubrir mi diagn√≥stico completo
          </button>
        </div>

        </div>

        <!-- TEST OCULTO -->
        <div class="test-wrapper mt-4 mb-5" style="display: none; flex-direction: column; align-items: center;">
          <div id="step-counter-patrimonio" class="step-counter">1 de 6</div>

          <form id="test-patrimonio">
            <div class="centered-content">
              <!-- PREGUNTAS -->
              <div class="step active">
                <p>1. ¬øTienes un fondo de emergencia para al menos 3 meses?</p>
                <label><input type="radio" name="q1" value="1" required> S√≠</label>
                <label><input type="radio" name="q1" value="0"> No</label>
              </div>
              <div class="step">
                <p>2. ¬øTienes seguro de vida o incapacidad?</p>
                <label><input type="radio" name="q2" value="1" required> S√≠</label>
                <label><input type="radio" name="q2" value="0"> No</label>
              </div>
              <div class="step">
                <p>3. ¬øDiversificas tus inversiones?</p>
                <label><input type="radio" name="q3" value="1" required> S√≠</label>
                <label><input type="radio" name="q3" value="0"> No</label>
              </div>
              <div class="step">
                <p>4. ¬øHas hecho testamento o planificaci√≥n hereditaria?</p>
                <label><input type="radio" name="q4" value="1" required> S√≠</label>
                <label><input type="radio" name="q4" value="0"> No</label>
              </div>
              <div class="step">
                <p>5. ¬øConoces tus obligaciones fiscales como inversor?</p>
                <label><input type="radio" name="q5" value="1" required> S√≠</label>
                <label><input type="radio" name="q5" value="0"> No</label>
              </div>
              <div class="step">
                <p>6. ¬øHas recibido asesoramiento legal o financiero en el √∫ltimo a√±o?</p>
                <label><input type="radio" name="q6" value="1" required> S√≠</label>
                <label><input type="radio" name="q6" value="0"> No</label>
              </div>
            </div>

            <!-- BOTONES -->
            <div class="buttons">
              <button type="button" id="prev-btn-patrimonio" class="btn-primary" disabled>Anterior</button>
              <button type="button" id="next-btn-patrimonio" class="btn-primary">Siguiente</button>
            </div>
          </form>

          <!-- RESULTADO FINAL -->
          <div id="diagnostico-final" class="test-result d-none">
            <h3 class="mt-4">üõ°Ô∏è Diagn√≥stico de tu Protecci√≥n Patrimonial</h3>
            <p class="lead"><strong>Resultado:</strong> <span id="nivel-proteccion" class="highlight"></span></p>
            <p id="mensaje-proteccion" class="mb-4"></p>
            <p class="recomendacion-patrimonial" id="recomendacion-proteccion" style="margin-top: 1rem;"></p>


            <form id="envio-email" class="email-form">
              <label for="emailUsuario">¬øQuieres recibir tu diagn√≥stico por email?</label>
              <input type="email" id="emailUsuario" name="emailUsuario" placeholder="tu@email.com" required>
              <button type="submit" class="btn-primary mt-2">Enviar</button>
            </form>

            <p id="confirmacion-envio" style="display:none;" class="mt-3 text-success">‚úÖ Tu diagn√≥stico ha sido enviado.</p>

            <a href="#contacto" class="btn btn-success" style="margin-top: 1rem;">Solicitar revisi√≥n personalizada</a>
          </div>
        </div>

    
        <!-- Conceptos Clave -->
        <div class="conceptos-box">
          <div class="concepto">
            <h4>üìÖ Plan de Jubilaci√≥n</h4>
            <p>Un buen plan asegura ingresos estables cuando dejes de trabajar. Usa fondos indexados y planes de pensiones.</p>
          </div>
          <div class="concepto">
            <h4>üìä Diversificaci√≥n</h4>
            <p>Distribuye tus inversiones entre ETFs, inmuebles y real estate para minimizar riesgos.</p>
          </div>
          <div class="concepto">
            <h4>üéØ Objetivos Financieros</h4>
            <p>Define metas claras a corto, medio y largo plazo para tener un rumbo seguro.</p>
          </div>
        </div>

    
        <!-- Pilares del Plan de Protecci√≥n Patrimonial -->
        <div class="mt-5 text-center">
          <h3 class="mb-4" style="margin-top: 5rem;">üß± Pilares del Plan de Protecci√≥n Patrimonial</h3>
          <div class="grid-points" style="max-width: 1100px; margin: 0 auto;">
            <div class="point-box">
              <h4>An√°lisis Patrimonial</h4>
              <p>Inventario detallado de tus activos, ingresos, deudas, situaci√≥n fiscal y legal. Es el punto de partida para cualquier estrategia.</p>
            </div>
            <div class="point-box">
              <h4>Coberturas Clave</h4>
              <p>Contrataci√≥n adecuada de seguros de vida, incapacidad, salud y responsabilidad civil para proteger tu n√∫cleo familiar y patrimonial.</p>
            </div>
            <div class="point-box">
              <h4>Diversificaci√≥n</h4>
              <p>Distribuir tus inversiones entre ETFs, inmuebles, liquidez, commodities y tecnolog√≠a para reducir el riesgo sin perder rentabilidad.</p>
            </div>
            <div class="point-box">
              <h4>Blindaje Legal</h4>
              <p>Uso estrat√©gico de testamentos, donaciones, sociedades o pactos familiares para asegurar la continuidad de tu legado.</p>
            </div>
            <div class="point-box">
              <h4>Planificaci√≥n Familiar</h4>
              <p>Organizar el traspaso patrimonial pensando en la estabilidad de tus herederos, integrando educaci√≥n financiera intergeneracional.</p>
            </div>
            <div class="point-box">
              <h4>Revisi√≥n Anual</h4>
              <p>Actualizaci√≥n peri√≥dica de tus estructuras de protecci√≥n seg√∫n la evoluci√≥n normativa, econ√≥mica y personal.</p>
            </div>
          </div>
        </div>
    
        <!-- Ejemplo de Estrategia -->
        <div class="mt-5 text-center">
          <h3 class="mb-3" style="margin-top: 5rem;">üìä Ejemplo de Distribuci√≥n Patrimonial</h3>
          <div class="table-responsive mt-3" style="max-width: 900px; margin-left: auto; margin-right: auto;">
            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Categor√≠a</th>
                  <th>% Recomendado</th>
                  <th>Descripci√≥n</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Activo Seguro (Bonos, CDTs)</td>
                  <td>30%</td>
                  <td>Preserva capital y genera rendimientos estables.</td>
                </tr>
                <tr>
                  <td>Activo Moderado (ETFs, Acciones)</td>
                  <td>50%</td>
                  <td>Balance entre seguridad y crecimiento.</td>
                </tr>
                <tr>
                  <td>Activo Arriesgado (Criptomonedas, Startups)</td>
                  <td>20%</td>
                  <td>Mayor riesgo pero potencial de crecimiento alto.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
    
        <!-- Bot√≥n Redirigir a Calculadora -->
        <div class="text-center mt-5 mb-5">
        <button type="button" class="btn-estrecho" onclick="window.location.href='#simulador'">
          Ir a la Calculadora de Inter√©s Compuesto
        </button>
        </div>
      </div>
    </section>
    
<!-- CONTACTO Y NEWSLETTER -->
<section id="contacto" class="section section-contacto section-bg-dark" data-aos="fade-up">
  <div class="container contacto-newsletter-grid">

    <!-- T√≠tulo compartido -->
    <div class="bloque-superior">
      <h2>üì¨ ¬øNos ponemos en contacto?</h2>
      <p>Resuelve tus dudas o suscr√≠bete para recibir ideas y oportunidades en tu correo.</p>
    </div>

    <!-- FORMULARIO DE CONTACTO -->
    <div class="contacto-wrapper">
      <h3 class="h3-tarjeta">Asesor√≠a directa</h3>

      <div class="aviso-contacto">
        <p>üõ°Ô∏è Completa este formulario y me pondr√© en contacto contigo lo antes posible.</p>
        <p>üîí Tus datos est√°n seguros. Te responder√© personalmente en menos de 48h.</p>
      </div>

      <form class="contact-form">
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <input type="text" id="nombre" name="nombre" required>
        </div>

        <div class="form-group">
          <label for="email">Correo electr√≥nico</label>
          <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
          <label for="mensaje">Mensaje</label>
          <textarea id="mensaje" name="mensaje" rows="5" required></textarea>
        </div>

        <button type="submit" class="btn-primary">Enviar mensaje</button>

        <p class="frase-final-contacto">
          No hay inversi√≥n m√°s rentable que tomar decisiones con claridad.<br>
          Estoy aqu√≠ para ayudarte.
        </p>

        <div class="firma-contacto">
          <p><strong>Carlos</strong><br><span>Asesor financiero</span></p>
        </div>
      </form>
    </div>

    <!-- NEWSLETTER -->
    <div class="newsletter-box">
      <h3 class="h3-tarjeta">Suscr√≠bete a la newsletter</h3>

      <div class="aviso-newsletter">
        <p>üì¨ Recibe consejos financieros, estrategias de inversi√≥n y contenido exclusivo cada semana.</p>
      </div>

      <form id="form-newsletter" class="newsletter-form">
        <input type="email" placeholder="Tu email aqu√≠..." required />
        <button type="submit" class="btn-estrecho">Suscribirme</button>
      </form>

      <p class="confianza-texto">Sin spam. Solo contenido √∫til y aplicable.</p>
    </div>

  </div>
</section>

  </main>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div class="container">
      <div class="footer-social">
        <a href="https://www.linkedin.com/in/tuusuario" target="_blank" aria-label="LinkedIn">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg" alt="LinkedIn" />
        </a>
        <a href="https://www.instagram.com/tuusuario" target="_blank" aria-label="Instagram">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram" />
        </a>
        <a href="mailto:tu@email.com" aria-label="Email">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/maildotru.svg" alt="Email" />
        </a>
        <a href="https://wa.me/34xxxxxxxxx" target="_blank" aria-label="WhatsApp">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" alt="WhatsApp" />
        </a>
      </div>
      <p class="footer-quote">Hecho con pasi√≥n financiera. üíºüíô</p>
      <p>&copy; 2025 Carlos Asesor Financiero. Todos los derechos reservados.</p>
    </div>
  </footer>
  

  <!-- SCRIPTS -->
  <script>
    // Men√∫ responsive
    document.querySelector('.nav-toggle').onclick = () => {
      document.querySelector('nav ul').classList.toggle('show');
    };
    // Scroll a top si hacen clic en "Inicio"
    document.querySelectorAll('a[href="#inicio"]').forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    </script>

  <!-- Test de Perfil y test de patrimonio -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("test-form");
  const steps = Array.from(document.querySelectorAll("#test-form .step"));
  const nextBtn = document.getElementById("next-btn");
  const prevBtn = document.getElementById("prev-btn");
  const counter = document.getElementById("step-counter");
  const result = document.getElementById("test-result");
  const txt = document.getElementById("perfil-texto");
  const desc = document.getElementById("perfil-desc");
  const retElem = document.getElementById("perfil-return");
  let current = 0;

  const perfilInfo = {
    "Conservador": {
      desc: "Buscas seguridad y estabilidad financiera ante todo.",
      return: "5%"
    },
    "Moderado": {
      desc: "Aceptas algo de riesgo para lograr buenos rendimientos a medio plazo.",
      return: "7%"
    },
    "Agresivo": {
      desc: "Buscas maximizar crecimiento, est√°s dispuesto a asumir mayor volatilidad.",
      return: "10%"
    }
  };

  function showStep(i) {
    steps.forEach((s, idx) => s.classList.toggle("active", idx === i));
    prevBtn.disabled = i === 0;
    nextBtn.textContent = i === steps.length - 1 ? "Terminar" : "Siguiente";
    counter.textContent = `${i + 1} de ${steps.length}`;
  }

  function goNext() {
    if (current < steps.length - 1) {
      current++;
      showStep(current);
    } else {
      const formData = new FormData(form);
      let score = 0;
      for (const value of formData.values()) {
        score += parseInt(value, 10);
      }

      let perfil = "";
      if (score <= 20) perfil = "Conservador";
      else if (score <= 35) perfil = "Moderado";
      else perfil = "Agresivo";

      const emoji = {
        "Conservador": "üíº",
        "Moderado": "üìà",
        "Agresivo": "üöÄ"
      };

      document.getElementById("emoji-perfil").textContent = emoji[perfil];
      txt.textContent = perfil;
      desc.textContent = perfilInfo[perfil].desc;
      retElem.textContent = perfilInfo[perfil].return;

      result.style.display = "block";
      form.style.display = "none";

      document.getElementById("btn-plan-recomendado").addEventListener("click", () => {
  if (perfil === "Conservador") {
    window.location.href = "#asesorias"; // Plan Accesible
  } else if (perfil === "Moderado" || perfil === "Agresivo") {
    window.location.href = "#modelos"; // Modelos de inversi√≥n
  }
});
    }
  }

  nextBtn.addEventListener("click", goNext);

  prevBtn.addEventListener("click", () => {
    if (current > 0) {
      current--;
      showStep(current);
    }
  });

  form.querySelectorAll("input[type=radio]").forEach(input => {
    input.addEventListener("change", () => {
      setTimeout(() => {
        goNext(); // avanzar autom√°ticamente con cada respuesta
      }, 300);
    });
  });

  showStep(0);
});
</script>


    

<!-- CALCULADORA DE INTERES COMPUESTO -->
<!-- CDN de Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- CDN de jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- Script de la calculadora -->
<script>
  let chartPie = null;
  let chartBar = null;
  let chartLine = null;
  
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("calculatorForm");
    const resultsBox = document.getElementById("results");
    const gridBox = document.getElementById("resultadosGrid");
    const cerrarBtn = document.getElementById("cerrarCalculoBtn");
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const initial = parseFloat(document.getElementById("initialAmount").value);
      const deposit = parseFloat(document.getElementById("periodicDeposit").value);
      const rate = parseFloat(document.getElementById("interestRate").value) / 100;
      const years = parseInt(document.getElementById("years").value);
  
      const result = calculateCompoundInterest(initial, deposit, rate, years);
      displayResults(result, initial);
  
      // Mostrar resultados
      resultsBox.classList.add("show");
      gridBox.classList.add("show");
    });
  
    cerrarBtn.addEventListener("click", function () {
      resultsBox.classList.remove("show");
      gridBox.classList.remove("show");
      form.scrollIntoView({ behavior: "smooth" });
    });
  });
  
  function calculateCompoundInterest(initial, monthlyDeposit, rate, years) {
  let total = initial;
  let totalDeposits = initial;
  let totalInterest = 0;
  let depositTotal = 0; // fuera del bucle
  let data = [];

  for (let year = 1; year <= years; year++) {
  let yearlyDeposit = monthlyDeposit * 12;
  let interest = total * rate;
  total += yearlyDeposit + interest;
  depositTotal += yearlyDeposit; // acumulamos aportaciones
  totalDeposits += yearlyDeposit;
  totalInterest += interest;

  data.push({
    year,
    deposit: yearlyDeposit,
    depositTotal,       // nuevo campo
    interest,
    interestTotal: totalInterest,
    balance: total
  });
}

  return {
    finalTotal: total,
    totalDeposits,
    totalInterest,
    data
  };
}

  
  function displayResults(result, initial) {
    // N√∫meros
    document.getElementById("totalSaved").textContent = `‚Ç¨${result.finalTotal.toFixed(2)}`;
    document.getElementById("totalDeposited").textContent = `‚Ç¨${result.totalDeposits.toFixed(2)} (Anual)`;
    document.getElementById("totalInterest").textContent = `‚Ç¨${result.totalInterest.toFixed(2)}`;
  
    // Tablas
    const tbodyLeft = document.getElementById("tableBodyLeft");
    const tbodyRight = document.getElementById("tableBodyRight");
    tbodyLeft.innerHTML = "";
    tbodyRight.innerHTML = "";
  
    result.data.forEach((row, index) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${row.year}</td>
        <td>‚Ç¨${row.deposit.toFixed(2)}</td>
        <td>‚Ç¨${row.interest.toFixed(2)}</td>
        <td>‚Ç¨${row.balance.toFixed(2)}</td>
      `;
      if (index < 13) {
        tbodyLeft.appendChild(tr);
      } else {
        tbodyRight.appendChild(tr);
      }
    });
  
    // Destruir anteriores
    if (chartPie) chartPie.destroy();
    if (chartBar) chartBar.destroy();
    if (chartLine) chartLine.destroy();
  
    chartPie = new Chart(document.getElementById("pieChart"), {
  type: "pie",
  data: {
    labels: ["Capital Inicial", "Aportaciones Mensuales", "Intereses"],
    datasets: [{
      data: [initial, result.totalDeposits - initial, result.totalInterest],
      backgroundColor: [
        "rgba(192, 132, 252, 0.85)",  // lila (capital inicial)
        "rgba(13, 110, 253, 0.85)",   // azul (aportaciones)
        "rgba(111, 66, 193, 0.85)"    // p√∫rpura (intereses)
      ],
      borderColor: "#ffffff",
      borderWidth: 2,
      hoverOffset: 18
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    animation: {
      animateRotate: true,
      duration: 1000,
      easing: "easeOutQuart"
    },
    plugins: {
      legend: {
        display: false
      },
      tooltip: {
        callbacks: {
          label: function (context) {
            const label = context.label || '';
            const value = context.parsed || 0;
            const total = context.dataset.data.reduce((a, b) => a + b, 0);
            const percentage = ((value / total) * 100).toFixed(1);
            return `${label}: ‚Ç¨${value.toLocaleString()} (${percentage}%)`;
          }
        }
      }
    }
  }
});



// ‚úÖ Leyenda personalizada centrada
const leyendaHTML = `
  <div style="display:flex; justify-content:center; gap:1.5rem;">
    <span style="display:flex; align-items:center; gap:0.5rem;">
      <span style="width:14px; height:14px; background:#0d6efd; border-radius:3px;"></span> Aportaciones
    </span>
    <span style="display:flex; align-items:center; gap:0.5rem;">
      <span style="width:14px; height:14px; background:#6f42c1; border-radius:3px;"></span> Intereses
    </span>
    <span style="display:flex; align-items:center; gap:0.5rem;">
      <span style="width:14px; height:14px; background:#c084fc; border-radius:3px;"></span> Capital Inicial
    </span>
  </div>
`;

const leyendaDiv = document.getElementById("leyendaPieChart");
leyendaDiv.innerHTML = leyendaHTML;
leyendaDiv.classList.add("show");



  
// üî¢ Calcular el m√°ximo del a√±o para escalar el eje Y
const maxYAcumulado = Math.ceil(
  Math.max(...result.data.map(d =>
    initial + d.depositTotal + d.interestTotal
  )) * 1.05
);

// üìä Gr√°fico de barras acumuladas por a√±o
const ctxAcumulado = document.getElementById("barChartAcumulado");
if (window.chartAcumulado) window.chartAcumulado.destroy(); // Destruir si ya existe

window.chartAcumulado = new Chart(ctxAcumulado, {
  type: "bar",
  data: {
    labels: result.data.map(d => d.year),
    datasets: [
      {
        label: "Capital Inicial",
        data: result.data.map(() => initial),
        backgroundColor: "#c084fc", // lila
        stack: "stack2"
      },
      {
        label: "Aportaciones Acumuladas",
        data: result.data.map(d => d.depositTotal),
        backgroundColor: "#4f81bd", // azul
        stack: "stack2"
      },
      {
        label: "Intereses Acumulados",
        data: result.data.map(d => d.interestTotal),
        backgroundColor: "#76c477", // verde
        stack: "stack2"
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: "bottom",
        labels: {
          font: { size: 14, weight: "bold" },
          color: "#333"
        }
      },
      tooltip: {
        callbacks: {
          label: ctx => `‚Ç¨${ctx.raw.toLocaleString()}`
        }
      }
    },
    scales: {
      x: {
        stacked: true,
        grid: { display: false },
        ticks: {
          color: "#555",
          font: { size: 12 }
        },
        barPercentage: 0.7,
        categoryPercentage: 0.6
      },
      y: {
        stacked: true,
        beginAtZero: true,
        max: maxYAcumulado,
        grid: { color: "#e0e0e0" },
        ticks: {
          callback: value => `‚Ç¨${value.toLocaleString()}`,
          color: "#555",
          font: { size: 12 }
        }
      }
    }
  }
});



    };
  
    // L√≠nea de balance acumulado
    chartLine = new Chart(document.getElementById("lineChart"), {
      type: "line",
      data: {
        labels: result.data.map(d => d.year),
        datasets: [{
          label: "Balance Acumulado",
          data: result.data.map(d => d.balance),
          borderColor: "#0d6efd",
          backgroundColor: "rgba(13, 110, 253, 0.15)",
          fill: true,
          tension: 0.3,
          pointRadius: 3,
          pointHoverRadius: 6
        }]
      },
      options: {
        responsive: true,
        animation: {
          duration: 1000,
          easing: "easeOutQuart"
        }
      }
    });
  
  </script>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("calculatorForm");
    const results = document.getElementById("results");
    const grid = document.getElementById("resultadosGrid");
    const cerrarBtn = document.getElementById("cerrarCalculoBtn");
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const initial = parseFloat(document.getElementById('initialAmount').value);
      const deposit = parseFloat(document.getElementById('periodicDeposit').value);
      const rate = parseFloat(document.getElementById('interestRate').value) / 100;
      const years = parseInt(document.getElementById('years').value);
  
      const result = calculateCompoundInterest(initial, deposit, rate, years);
      displayResults(result, initial);
      mostrarGraficoBarras(result, initial);
  
      // Mostrar bloques
      results.classList.add("show");
      grid.classList.add("show");
    });
  
    cerrarBtn.addEventListener("click", function () {
      results.classList.remove("show");
      grid.classList.remove("show");
      form.scrollIntoView({ behavior: "smooth" });
    });
  });
  </script>
  

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("nav a");
  
    function activateMenu() {
      let current = "";
  
      sections.forEach((section) => {
        const sectionTop = section.offsetTop - 120;
        if (pageYOffset >= sectionTop) {
          current = section.getAttribute("id");
        }
      });
  
      navLinks.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href") === `#${current}`) {
          link.classList.add("active");
        }
      });
    }
  
    window.addEventListener("scroll", activateMenu);
  });
  </script>
  
<!--contacto-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const links = document.querySelectorAll(".modelo-btn");
    const contacto = document.querySelector("#contacto");

    links.forEach(link => {
      link.addEventListener("click", function () {
        const modelo = this.getAttribute("data-modelo");
        localStorage.setItem("modeloSolicitado", modelo);
      });
    });

    // Rellenar el campo si se llega al formulario
    const modeloGuardado = localStorage.getItem("modeloSolicitado");
    if (modeloGuardado && contacto) {
      const textarea = contacto.querySelector("textarea, input[name='mensaje']");
      if (textarea) {
        textarea.value = `Hola Carlos, me interesa el modelo de inversi√≥n: ${modeloGuardado}`;
      }
      localStorage.removeItem("modeloSolicitado");
    }
  });
</script>

<!--test de funcionamiento de boton de test de patrimonio y de inversor-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btnMostrarTest = document.getElementById("mostrar-test-inversor");
    const bloqueTest = document.getElementById("bloque-test-completo");

    if (btnMostrarTest && bloqueTest) {
      btnMostrarTest.addEventListener("click", () => {
        bloqueTest.style.display = "block";
      });
    }
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btnMostrarTestPatrimonio = document.getElementById("mostrar-test-patrimonio");
    const testWrapper = document.querySelector(".section-proteccion .test-wrapper");

    if (btnMostrarTestPatrimonio && testWrapper) {
      btnMostrarTestPatrimonio.addEventListener("click", () => {
        testWrapper.style.display = "flex";
        testWrapper.scrollIntoView({ behavior: "smooth" });
      });
    }
  });
</script>

<!--funcionamiento del avance autoamtico en el Test.P y funcionamiento del "siguiente y anterior"-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("test-patrimonio");
    const steps = form.querySelectorAll(".step");
    const nextBtn = document.getElementById("next-btn-patrimonio");
    const prevBtn = document.getElementById("prev-btn-patrimonio");
    const counter = document.getElementById("step-counter-patrimonio");
    const resultado = document.getElementById("diagnostico-final");

    let currentStep = 0;

    function showStep(i) {
      steps.forEach((s, idx) => s.classList.toggle("active", idx === i));
      prevBtn.disabled = i === 0;
      nextBtn.textContent = i === steps.length - 1 ? "Terminar" : "Siguiente";
      counter.textContent = `${i + 1} de ${steps.length}`;
    }

    function avanzar() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      } else {
        evaluarResultados();
        
      }
    }

    function evaluarResultados() {
      const formData = new FormData(form);
      let total = 0;

      for (let [key, value] of formData.entries()) {
        total += parseInt(value, 10);
      }

      let nivel = "";
      let mensaje = "";

      if (total <= 2) {
        nivel = "Muy Bajo";
        mensaje = "Necesitas construir una base s√≥lida de protecci√≥n financiera.";
      } else if (total <= 4) {
        nivel = "Medio";
        mensaje = "Tienes ciertos elementos cubiertos, pero puedes mejorar tu blindaje patrimonial.";
      } else {
        nivel = "Alto";
        mensaje = "Tu protecci√≥n patrimonial es fuerte y est√° bien estructurada.";
      }

      document.getElementById("nivel-proteccion").textContent = nivel;
      document.getElementById("mensaje-proteccion").textContent = mensaje;

      const recomendacionElem = document.getElementById("recomendacion-proteccion");
      let recomendacion = "";

    if (nivel === "Muy Bajo") {
      recomendacion = "üöß Necesitas empezar por lo esencial. Crea un fondo de emergencia y contrata un seguro b√°sico. üí° Considera una asesor√≠a inicial.";
    } else if (nivel === "Medio") {
      recomendacion = "üîÑ Vas por buen camino. Refuerza tus coberturas, diversifica tus inversiones y planifica tu herencia üß©.";
    } else if (nivel === "Alto") {
      recomendacion = "üõ°Ô∏è Excelente protecci√≥n. Mant√©n revisiones anuales y explora herramientas avanzadas como fideicomisos o sociedades patrimoniales üß†.";
    }


      recomendacionElem.textContent = recomendacion;

      resultado.classList.remove("d-none");
      form.style.display = "none";
    }

    nextBtn.addEventListener("click", avanzar);

    prevBtn.addEventListener("click", () => {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    });

    form.querySelectorAll("input[type=radio]").forEach(input => {
      input.addEventListener("change", () => {
        setTimeout(avanzar, 300);
      });
    });

    showStep(currentStep);
  });
</script>

<!--funcionamiento del test doble en la seccion de test-->
<script>
  // === Preguntas Inversor ===
  const preguntasInversor = [
    "¬øCu√°l es tu objetivo principal al invertir?",
    "¬øCu√°l es tu horizonte temporal de inversi√≥n?",
    "¬øQu√© har√≠as si tus inversiones bajan un 10%?",
    "¬øQu√© nivel de conocimientos financieros tienes?",
    "¬øCu√°l es tu actitud frente al riesgo?",
    "¬øCu√°l es tu situaci√≥n de ingresos y estabilidad laboral?",
    "¬øCu√°nta parte de tus ahorros est√°s dispuesto a invertir?",
    "¬øQu√© prefieres: seguridad o rentabilidad?",
    "¬øQu√© te motiva m√°s a invertir?",
    "¬øQu√© har√≠as si tu inversi√≥n baja un 20% en 6 meses?"
  ];

  // === Preguntas Patrimoniales ===
  const preguntasPatrimoniales = [
    "¬øTienes un fondo de emergencia para 3-6 meses?",
    "¬øTienes un seguro de vida o incapacidad?",
    "¬øHas hecho testamento o planificaci√≥n sucesoria?",
    "¬øTienes tus activos diversificados (inmuebles, efectivo, inversi√≥n)?",
    "¬øConoces los impuestos que afectan a tu patrimonio?",
    "¬øTienes una estrategia en caso de fallecimiento o invalidez?"
  ];

  // === Renderizar preguntas
  function crearSteps(preguntas, contenedorId, grupo) {
    const contenedor = document.getElementById(contenedorId);
    contenedor.innerHTML = "";
    preguntas.forEach((pregunta, i) => {
      contenedor.innerHTML += `
        <div class="step ${i === 0 ? 'active' : ''}" id="${grupo}-step-${i}">
          <p>${i + 1}. ${pregunta}</p>
          <label><input type="radio" name="${grupo}${i}" value="1"> Conservador / No</label>
          <label><input type="radio" name="${grupo}${i}" value="3"> Intermedio / Algo</label>
          <label><input type="radio" name="${grupo}${i}" value="5"> Agresivo / S√≠</label>
        </div>
      `;
    });
  }

  crearSteps(preguntasInversor, "inversor-steps", "q");
  crearSteps(preguntasPatrimoniales, "patrimonio-steps", "p");

  // === Navegaci√≥n general
    function setupTest(prefix, total, nextBtnId, prevBtnId, formId, resultId, textoId, descId, tipo) {
      let current = 0;
      const next = document.getElementById(nextBtnId);
      const prev = document.getElementById(prevBtnId);
      const steps = Array.from(document.querySelectorAll(`#${formId} .step`));
      const resultBox = document.getElementById(resultId);
      const texto = document.getElementById(textoId);
      const desc = document.getElementById(descId);

      function showStep(i) {
        steps.forEach((s, idx) => s.classList.toggle("active", idx === i));
        prev.disabled = i === 0;
        next.textContent = i === steps.length - 1 ? "Terminar" : "Siguiente";

        // Barra de progreso
        const progressId = tipo === "inversor" ? "progress-inv" : "progress-pat";
        const progress = document.getElementById(progressId);
        if (progress) {
          const porcentaje = Math.round(((i + 1) / total) * 100);
          progress.style.width = `${porcentaje}%`;
        }
      }

      function evaluar() {
        const formData = new FormData(document.getElementById(formId));
        let totalPunt = 0;
        for (let val of formData.values()) totalPunt += parseInt(val);
        const media = totalPunt / total;

        if (tipo === "inversor") {
          let perfil = media <= 2 ? "Conservador" : media <= 3.5 ? "Moderado" : "Agresivo";
          texto.textContent = perfil;
          desc.textContent = perfil === "Conservador"
            ? "Buscas estabilidad y seguridad, incluso si implica menor rentabilidad."
            : perfil === "Moderado"
            ? "Buscas equilibrio entre crecimiento y riesgo controlado."
            : "Est√°s dispuesto a asumir riesgos altos a cambio de mayor rentabilidad.";
          localStorage.setItem("perfilInversor", perfil);
        } else {
          let nivel = media <= 2 ? "Bajo" : media <= 3.5 ? "Medio" : "Alto";
          texto.textContent = nivel;
          desc.textContent = nivel === "Bajo"
            ? "Tienes carencias importantes en protecci√≥n financiera."
            : nivel === "Medio"
            ? "Vas por buen camino, pero puedes reforzar √°reas clave."
            : "Tu blindaje patrimonial es s√≥lido.";
          localStorage.setItem("proteccionPatrimonial", nivel);
        }

        resultBox.style.display = "block";

        // Oculta solo el formulario, no el resultado
        document.querySelector(`#${formId}`).style.display = "none";

        // Actualizar el diagn√≥stico combinado
        actualizarDiagnosticoCombinado();
        document.getElementById("sticky-cta").style.display = "none";


        // Ocultar el test cuando finaliza
        if (tipo === "inversor") {
          document.getElementById("bloque-inversor").style.display = "none";
        } else {
          document.getElementById("bloque-patrimonio").style.display = "none";
        }
      }

      next.onclick = avanzar;
      prev.onclick = () => {
        if (current > 0) current--;
        showStep(current);
      };

      function avanzar() {
        if (current < total - 1) {
          current++;
          showStep(current);
        } else {
          evaluar();
        }
      }

  // AVANCE AUTOM√ÅTICO al seleccionar
  steps.forEach((step, index) => {
    step.querySelectorAll("input[type='radio']").forEach(radio => {
      radio.addEventListener("change", () => {
        setTimeout(() => avanzar(), 400); // 400ms para que no se vea brusco
      });
    });
  });

  showStep(current);
}


  setupTest("q", preguntasInversor.length, "next-inv", "prev-inv", "test-inversor", "resultado-inversor", "perfil-texto", "perfil-desc", "inversor");
  setupTest("p", preguntasPatrimoniales.length, "next-pat", "prev-pat", "test-patrimonio", "resultado-patrimonio", "proteccion-texto", "proteccion-desc", "patrimonial");

  // === Resultado combinado
  function actualizarDiagnosticoCombinado() {
    const perfil = localStorage.getItem("perfilInversor");
    const proteccion = localStorage.getItem("proteccionPatrimonial");
    const out = document.getElementById("resultado-combinado");

    if (perfil && proteccion) {
let mensaje = `
<p>
  Eres un inversor <strong>${perfil.toLowerCase()}</strong> con una protecci√≥n patrimonial <strong>${proteccion.toLowerCase()}</strong>.
</p>
`;

// Diagn√≥stico espec√≠fico por combinaci√≥n
if (perfil === "Conservador" && proteccion === "Bajo") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Est√°s en una situaci√≥n vulnerable y conservadora. Es clave empezar por construir una base s√≥lida.</p>
    <ul>
      <li>üí∞ Establece un fondo de emergencia de al menos 3‚Äì6 meses.</li>
      <li>üõ°Ô∏è Contrata un seguro de vida o salud si no lo tienes.</li>
      <li>üìö Aprende conceptos b√°sicos de inversi√≥n segura (bonos, dep√≥sitos...)</li>
      <li>üì• Descarga el <a href="#excel">Excel Financiero Personal</a> para controlar tu d√≠a a d√≠a.</li>
    </ul>
  `;
} else if (perfil === "Conservador" && proteccion === "Medio") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Tienes cierta protecci√≥n, pero tu perfil inversor es a√∫n muy prudente.</p>
    <ul>
      <li>üìà Explora productos de bajo riesgo (fondos indexados defensivos, renta fija).</li>
      <li>üß© Eval√∫a si tu protecci√≥n legal (testamento, seguros) es suficiente.</li>
      <li>üß† Revisa nuestro <a href="#herramientas">bloque b√°sico del temario</a>.</li>
    </ul>
  `;
} else if (perfil === "Conservador" && proteccion === "Alto") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Excelente protecci√≥n, pero tu dinero podr√≠a estar sin aprovechar.</p>
    <ul>
      <li>üöÄ Aprende a invertir poco a poco sin miedo.</li>
      <li>üíº Considera trabajar con un planificador para optimizar tus ahorros.</li>
      <li>üìò Empieza por el temario intermedio y el Excel Personal Pro.</li>
    </ul>
  `;
} else if (perfil === "Moderado" && proteccion === "Bajo") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Est√°s dispuesto a asumir algo de riesgo, pero tu protecci√≥n no te respalda.</p>
    <ul>
      <li>üìâ Cuidado con asumir riesgos sin base. Refuerza tu colch√≥n financiero.</li>
      <li>üß† Eval√∫a tus seguros actuales y tu estructura familiar.</li>
      <li>üì• Descarga el <a href="#excel">Excel Financiero</a> y revisa gastos fijos.</li>
    </ul>
  `;
} else if (perfil === "Moderado" && proteccion === "Medio") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Est√°s en equilibrio, pero a√∫n puedes reforzar tu estructura financiera.</p>
    <ul>
      <li>üìä Define metas de inversi√≥n a 3‚Äì5 a√±os.</li>
      <li>üßæ Eval√∫a tu fondo de emergencia: ¬øcubre al menos 6 meses?</li>
      <li>üìò Revisa nuestro <a href="#herramientas">temario intermedio</a>.</li>
    </ul>
  `;
} else if (perfil === "Moderado" && proteccion === "Alto") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Est√°s en posici√≥n ideal para crecer con seguridad.</p>
    <ul>
      <li>üìà Empieza a diversificar: ETFs, fondos tem√°ticos, dividendos.</li>
      <li>üèõÔ∏è Analiza ventajas fiscales de planes de pensiones o PIAS.</li>
      <li>üìò Descarga nuestro Excel Empresarial si gestionas un negocio.</li>
    </ul>
  `;
} else if (perfil === "Agresivo" && proteccion === "Bajo") {
  mensaje += `
    <p>‚ö†Ô∏è <strong>Interpretaci√≥n:</strong> Mucho riesgo con poca protecci√≥n. Es una combinaci√≥n peligrosa.</p>
    <ul>
      <li>üõë Refuerza tu seguridad antes de invertir agresivamente.</li>
      <li>üí° No pongas en juego el futuro de tu familia.</li>
      <li>üìò Haz primero el bloque de protecci√≥n patrimonial.</li>
    </ul>
  `;
} else if (perfil === "Agresivo" && proteccion === "Medio") {
  mensaje += `
    <p>üîé <strong>Interpretaci√≥n:</strong> Est√°s en un punto de impulso, pero aseg√∫rate de cubrir riesgos personales.</p>
    <ul>
      <li>üß† Mant√©n tu apetito inversor, pero con control.</li>
      <li>üìä Estudia carteras balanceadas para agresivos.</li>
      <li>üìò Ap√≥yate en el Excel de control + temario avanzado.</li>
    </ul>
  `;
} else if (perfil === "Agresivo" && proteccion === "Alto") {
  mensaje += `
    <p>üöÄ <strong>Interpretaci√≥n:</strong> Tienes la protecci√≥n y el empuje: est√°s listo para escalar.</p>
    <ul>
      <li>üíº Eval√∫a montar una cartera a largo plazo diversificada.</li>
      <li>üß¨ Estudia fiscalidad avanzada para optimizar beneficios.</li>
      <li>üìò Consigue el Excel Empresarial + mentor√≠a personalizada.</li>
    </ul>
  `;
}

// Mostrar resultado
out.innerHTML = mensaje;
document.getElementById("bloque-combinado").style.display = "block";
    } else {
      out.innerHTML = "<p>Por favor, completa ambos tests para ver el diagn√≥stico combinado.</p>";
    }
  
  }

document.getElementById("empezar-btn").addEventListener("click", () => {
  document.getElementById("bloque-test").style.display = "block";
  document.getElementById("empezar-btn").style.display = "none";
});

</script>

<!--SCRIPTS PARA ABRIR Y CERRAR MODAL-->

<!-- BLOQUE MODAL GLOBAL PARA PRODUCTOS FINANCIEROS -->
<div id="modal-detalle" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <button class="cerrar-modal" onclick="cerrarModal()">‚úñ</button>
    <div id="modal-texto">
      <!-- Aqu√≠ se insertar√° el contenido din√°mico del producto al hacer clic -->
    </div>
  </div>
</div>

<script>
  // Cierre del modal al hacer clic fuera del contenido
  window.onclick = function(event) {
    const modals = document.querySelectorAll(".modal-overlay");
    modals.forEach(modal => {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    });
  };

  function abrirModal(contenidoHTML) {
    const modal = document.getElementById("modal-detalle");
    const texto = document.getElementById("modal-texto");
    texto.innerHTML = contenidoHTML;
    modal.style.display = "flex";
  }

  function cerrarModal() {
    document.getElementById("modal-detalle").style.display = "none";
    const sticky = document.getElementById("sticky-cta");
    if (sticky) sticky.style.display = "block";
  }

  function mostrarPackStarter() {
    abrirModal(`
      <h3>üì¶ Pack Starter</h3>
      <p>Incluye el <strong>Temario B√°sico</strong> + <strong>Excel Financiero versi√≥n personal</strong>.</p>
      <ul>
        <li>üìò Educaci√≥n financiera desde cero</li>
        <li>üìä Excel para ingresos, gastos y metas</li>
        <li>‚úÖ Ideal para empezar sin complicaciones</li>
      </ul>
      <button class='btn-estrecho' onclick='window.location.href="#pack-starter"'>Comprar (3,99‚ÄØ‚Ç¨)</button>
    `);
  }

  function mostrarExcelFinanciero() {
    abrirModal(`
      <h3>üìä Mi Excel Financiero</h3>
      <p>Plantilla profesional para controlar tus ingresos, gastos, metas y ahorro. F√°cil de usar, con gr√°ficos autom√°ticos.</p>
      <ul>
        <li>üìà Gr√°ficos autom√°ticos</li>
        <li>üìÖ Control mensual y anual</li>
        <li>üß† Versi√≥n editable y visual</li>
      </ul>
      <button class='btn-estrecho' onclick='window.location.href="#excel-financiero"'>Comprar (2,99‚ÄØ‚Ç¨)</button>
    `);
  }

  function mostrarExcelEmpresarial() {
    abrirModal(`
      <h3>üíº Excel Empresarial</h3>
      <p>Control de facturaci√≥n, beneficios, IRPF/IVA y gastos para aut√≥nomos y negocios.</p>
      <ul>
        <li>üìë Facturaci√≥n e impuestos</li>
        <li>üìä An√°lisis mensual</li>
        <li>üßæ Declaraci√≥n trimestral</li>
      </ul>
      <button class='btn-estrecho' onclick='window.location.href="#excel-empresarial"'>Comprar (6,99‚ÄØ‚Ç¨)</button>
    `);
  }

  function mostrarTemarioPorBloques() {
    abrirModal(`
      <h3>üìò Temario por Bloques</h3>
      <p>Contenido educativo progresivo: b√°sico, intermedio y avanzado.</p>
      <ul>
        <li>üìñ Aprende a tu ritmo</li>
        <li>üß† Educaci√≥n + inversi√≥n + fiscalidad</li>
        <li>üì• Descargable y pr√°ctico</li>
      </ul>
      <button class='btn-estrecho' onclick='window.location.href="#temario-bloques"'>Ver desde 0,99‚ÄØ‚Ç¨</button>
    `);
  }

  function mostrarTestsImprimibles() {
    abrirModal(`
      <h3>üß† Tests Imprimibles</h3>
      <p>Autodiagn√≥sticos para saber si est√°s listo para invertir, emprender o blindar tu patrimonio.</p>
      <ul>
        <li>üîç Test de perfil inversor</li>
        <li>üõ°Ô∏è Diagn√≥stico patrimonial</li>
        <li>üñ®Ô∏è Formato imprimible y gratuito</li>
      </ul>
      <button class='btn-estrecho' onclick='window.location.href="#tests-imprimibles"'>Descargar (Gratis)</button>
    `);
  }
</script>

<!--cripts para mejor funcionamiento en movil-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.querySelector(".nav-toggle");
    const menu = document.querySelector("nav ul");

    toggle.addEventListener("click", function () {
      const expanded = this.getAttribute("aria-expanded") === "true";
      this.setAttribute("aria-expanded", !expanded);
      menu.classList.toggle("show");
    });
  });
</script>

<!--script de Activacion de AOS-->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true,
    });
  });
</script>

<!--CTAS-->
<div class="cta-scroll-container">
  <button class="btn-scroll-test combinado" onclick="document.getElementById('diagnostico').scrollIntoView({ behavior: 'smooth' })">
    üåç S√≠, quiero descubrir mi diagn√≥stico completo
  </button>
</div>
<!--el CTA DE WAS-->
<a href="https://wa.me/34696067113" class="whatsapp-cta" target="_blank" aria-label="WhatsApp de contacto">üí¨</a>



</body>
</html>
